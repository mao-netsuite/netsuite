/**
 * @preserve
 * Client-side script attached to E-Invoice Template custom record
 * 
 * @NApiVersion 2.1
 * @NScriptName E-Invoicing Template CS
 * @NScriptId _ei_template_cs
 * @NScriptType clientscript
 * @NModuleScope TargetAccount
 */

/*! For license information please see cs_e_template.js.LICENSE.txt */
define(["N/error","N/https","N/log","N/query","N/record","N/runtime","N/search","N/translation","N/ui/message","N/url","N/xml"],((e,t,r,n,a,s,i,o,u,c,d)=>{return l={723:(e,t)=>{var r;void 0===(r=function(){var e={3:"AF",247:"AX",6:"AL",62:"DZ",12:"AS",1:"AD",9:"AO",5:"AI",10:"AQ",4:"AG",11:"AR",7:"AM",15:"AW",14:"AU",13:"AT",16:"AZ",31:"BS",23:"BH",19:"BD",18:"BB",35:"BY",20:"BE",36:"BZ",25:"BJ",27:"BM",32:"BT",29:"BO",250:"BQ",17:"BA",34:"BW",33:"BV",30:"BR",106:"IO",28:"BN",22:"BG",21:"BF",24:"BI",117:"KH",46:"CM",37:"CA",249:"IC",53:"CV",124:"KY",40:"CF",248:"EA",212:"TD",45:"CL",47:"CN",54:"CX",38:"CC",48:"CO",119:"KM",39:"CD",41:"CG",44:"CK",49:"CR",43:"CI",98:"HR",52:"CU",251:"CW",55:"CY",56:"CZ",59:"DK",58:"DJ",60:"DM",61:"DO",221:"TL",63:"EC",65:"EG",208:"SV",88:"GQ",67:"ER",64:"EE",69:"ET",72:"FK",74:"FO",71:"FJ",70:"FI",75:"FR",80:"GF",175:"PF",213:"TF",76:"GA",85:"GM",79:"GE",57:"DE",82:"GH",83:"GI",89:"GR",84:"GL",78:"GD",87:"GP",92:"GU",91:"GT",81:"GG",86:"GN",93:"GW",94:"GY",99:"HT",96:"HM",233:"VA",97:"HN",95:"HK",100:"HU",109:"IS",105:"IN",101:"ID",108:"IR",107:"IQ",102:"IE",104:"IM",103:"IL",110:"IT",112:"JM",114:"JP",111:"JE",113:"JO",125:"KZ",115:"KE",118:"KI",121:"KP",122:"KR",254:"XK",123:"KW",116:"KG",126:"LA",135:"LV",127:"LB",132:"LS",131:"LR",136:"LY",129:"LI",133:"LT",134:"LU",148:"MO",144:"MK",142:"MG",156:"MW",158:"MY",155:"MV",145:"ML",153:"MT",143:"MH",150:"MQ",151:"MR",154:"MU",243:"YT",157:"MX",73:"FM",139:"MD",138:"MC",147:"MN",140:"ME",152:"MS",137:"MA",159:"MZ",146:"MM",160:"NA",169:"NR",168:"NP",166:"NL",161:"NC",171:"NZ",165:"NI",162:"NE",164:"NG",170:"NU",163:"NF",149:"MP",167:"NO",172:"OM",178:"PK",185:"PW",173:"PA",176:"PG",186:"PY",174:"PE",177:"PH",181:"PN",179:"PL",184:"PT",182:"PR",187:"QA",188:"RE",189:"RO",190:"RU",191:"RW",26:"BL",198:"SH",120:"KN",128:"LC",141:"MF",234:"VC",241:"WS",203:"SM",207:"ST",192:"SA",204:"SN",50:"RS",194:"SC",202:"SL",197:"SG",252:"SX",201:"SK",199:"SI",193:"SB",205:"SO",244:"ZA",90:"GS",253:"SS",68:"ES",130:"LK",183:"PS",180:"PM",195:"SD",206:"SR",200:"SJ",210:"SZ",196:"SE",42:"CH",209:"SY",225:"TW",216:"TJ",226:"TZ",215:"TH",214:"TG",217:"TK",220:"TO",223:"TT",219:"TN",222:"TR",218:"TM",211:"TC",224:"TV",228:"UG",227:"UA",2:"AE",77:"GB",230:"US",231:"UY",229:"UM",232:"UZ",239:"VU",235:"VE",238:"VN",236:"VG",237:"VI",240:"WF",66:"EH",242:"YE",245:"ZM",246:"ZW"};return{getFreeCountryISOCode:function(t){return e[t]},getFreeCountryInternalId:function(t){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t)return r}}}.apply(t,[]))||(e.exports=r)},369:(e,t,r)=>{var n,a;n=[r(1303),r(6189),r(5389),r(7789)],void 0===(a=function(e,t,r,n){function a(e){var r,n,a={success:!1,message:"",cttDetails:{}};if(!e)return a.message="Invalid Transaction Type ID.",a.success=!1,a;if(!s())return a.message="Custom Transactions feature should be enabled.",a.success=!1,a;isNaN(e)?(r="scriptid",n=t.Operator.IS):(r="id",n=t.Operator.EQUAL);try{var i=t.create({type:t.Type.CUSTOM_TRANSACTION_TYPE});i.condition=i.createCondition({fieldId:r,operator:n,values:e}),i.columns=[i.createColumn({fieldId:"name"}),i.createColumn({fieldId:"id"}),i.createColumn({fieldId:"scriptid"})];var o=i.run().results;if(0!==o.length){a.success=!0,a.message="Found CTT Details";for(var u=o.length-1;u>=0;u--)log.debug("EICTTMAN","Result of search on CTT: "+o[u].values),a.cttDetails.name=o[u].values[0],a.cttDetails.internalId=o[u].values[1],a.cttDetails.stringId=o[u].values[2]}else a.success=!1,a.message="The Transaction Type does not exist in the account."}catch(e){log.error(e.name,e.message+e.stack),a.success=!1,a.message="An error occurred during search on CTT. Details: "+e.name+". "+e.message}return a}function s(){return r.isFeatureInEffect("CUSTOMTRANSACTIONS")}return{getRegisteredCTTIntIdArray:function(){for(var t="custrecord_ei_registered_ctt",r=e.lookupFields({type:"customrecord_ei_ctt_map",id:1,columns:t})[t],n=[],a=0;a<r.length;a++)n.push(r[a].value);return log.debug("EICTTMAN","IDs in EICTTMAP: "+JSON.stringify(n)),n},getCTTDetails:a,getStringIdOfCTTFromInternalId:function(e){if(e)return a(e).cttDetails.stringId},getInternalIdOfCTTFromStringId:function(e){if(e)return a(e).cttDetails.internalId},isCustomTransactionFeatureEnabled:s,getCTTTransStyle:function(e){var r=null;if(!s())return r;var a=t.create({type:t.Type.CUSTOM_TRANSACTION_TYPE}),i=a.createCondition({fieldId:n.CORE_FIELDS.SCRIPT_ID,operator:t.Operator.IS,values:e});a.condition=a.and(i),a.columns=[a.createColumn({fieldId:n.CORE_FIELDS.TRANSACTION_STYLE,context:t.FieldContext.RAW})];var o=a.run().asMappedResults();return 1==o.length&&(r=o[0].transactionstyle),r}}}.apply(t,n))||(e.exports=a)},2200:(e,t,r)=>{var n,a;n=[r(8005),r(6686),r(7903),r(9502),r(4148),r(3899)],void 0===(a=function(e,t,r,n,a,s){var i,o,u="custrecord_psg_file_content_type",c="recmachcustrecord_psg_ei_temp_validator_parent",d="custrecord_psg_ei_temp_validator_regex",l="custrecord_psg_ei_temp_validator_xpath",p="custrecord_psg_ei_template_trans_type",T="custpage_psg_ei_template_supported_transtype",f="custpage_psg_ei_temp_ei_status_txn_block",_=[],g="transaction.msg.xmltypechangedconfirm",v="transaction.msg.xmlvalidatorsonly",I="transaction.msg.xmlvalidatorexists",y="template.templaterequired",S="template.mappingrequired",C="template.invalidxsdfile",E="template.templateorjsonrequired";function O(){var e=[g,v,I,y,S,E,C],t=n.getStringMap(e);(o={})[g]=t[g]||"Changing the value in the Content Type field from XML to a different type will remove all XML validators. Are you sure you want to change the content type?",o[v]=t[v]||"Only validators for XML content type can be added.",o[I]=t[I]||"This validator is already in the list.",o[y]=t[y]||"The template content is missing for the selected outbound transaction type. Provide a valid XML or JSON template content in the Outbound E-Documents field, then try again.",o[S]=t[S]||"You selected an inbound transaction type, but the JSON content of the field mapping is missing. Enter the JSON content in the Field Mapping for Inbound E-Documents field.",o[C]=t[C]||"The selected XSD file is not a valid XSD file. Ensure that the file you select has the .xsd extension.",o[E]=t[E]||"There are missing field values. For an outbound transaction, specify a valid XML or JSON content in the Template for Outbound E-Documents field. For an inbound transaction, specify the JSON content in the Field Mapping for Inbound E-Document field."}return{storeInitialRecordValues:function(e){i=e.getValue({fieldId:u});for(var t=0;t<e.getLineCount({sublistId:c});t++){var r=e.getSublistValue({sublistId:c,fieldId:l,line:t}),n=e.getSublistValue({sublistId:c,fieldId:d,line:t});_[t]=[r,n].join("")}},validateSublist:function(r){o||O();var n=!0,a=r.currentRecord,s=r.sublistId,i=a.getValue({fieldId:u});if(s===c)if("1"==i){n=function(r){var n=!0,a=r.getCurrentSublistValue({sublistId:c,fieldId:d});if(a){var s=e.isValidRegEx(a);s.isValid()||t.showMessage(s.getMessage()),n=s.isValid()}return n}(a);var p=a.getCurrentSublistValue({sublistId:c,fieldId:d}),T=[a.getCurrentSublistValue({sublistId:c,fieldId:l}),p].join(""),f=_.indexOf(T),g=a.getCurrentSublistIndex({sublistId:c});-1!=f?f!=g&&(t.showMessage(o[I]),n=!1):_[g]=T}else t.showMessage(o[v]),n=!1;return n},validateFieldChanged:function(e){var r=!0,n=e.currentRecord;if(e.fieldId===u)r=function(e){o||O();var r=!0,n=e.getValue({fieldId:u}),a=e.getLineCount({sublistId:c});if("1"===i&&n!==i&&a>0){var s=o[g];(r=t.showConfirmationMessage(s))?function(e){for(var t=e.getLineCount({sublistId:c}),r=0;r<t;r++)e.removeLine({sublistId:c,line:0})}(e):e.setValue({fieldId:u,value:"1"})}return i=e.getValue({fieldId:u}),r}(n);else if(e.fieldId===T){var a=n.getValue(T);n.setValue({fieldId:p,value:a})}else if(e.fieldId===f){var s=n.getValue(f);n.setValue({fieldId:"custrecord_psg_ei_temp_edoc_status",value:s})}return r},validateTemplateFields:function(e,t){var n="REQUIRED_PARAM_MISSING",i="Record is a required parameter for validating E-Document Template.",u="Context is a required parameter for validating E-Document Template.";if(!e)throw log.error(n,i),r.create({name:n,message:i,notifyOff:!0});if(!t)throw log.error(n,u),r.create({name:n,message:u,notifyOff:!0});o||O();var c=s.create();c.setValidity(!0);for(var d=e.getValue({fieldId:"custrecord_psg_ei_template_content"}),l=e.getValue({fieldId:"custrecord_psg_ei_parsing_template"}),T=e.getValue({fieldId:p}),f=!1,_=0;_<T.length;_++)if(a.isValidOutboundTransactionType(T[_])&&!a.isValidInboundTransactionType(T[_])){f=!0;break}return d||l?!d&&f&&(c.setValidity(!1),c.setMessage(o[y])):(c.setValidity(!1),c.setMessage(o[E])),{validationResult:c,hasatleastOneOutbound:f}},sublistChanged:function(e,t,r){if(t==c&&"remove"==r){var n=e.getCurrentSublistIndex({sublistId:c});_.splice(n,1)}}}}.apply(t,n))||(e.exports=a)},8005:(e,t,r)=>{var n,a;n=[r(2424),r(7903),r(9502)],void 0===(a=function(e,t,r){var n,a="template.incorrectregex",s="ei.outbound.template.invalidjson",i="template.invalidxml";function o(){var e=[a,s,i],t=r.getStringMap(e);(n={})[a]=t[a],n[s]=t[s],n[i]=t[i]}var u=function(){var e,t;return{setValidity:function(t){e=t},isValid:function(){return e},setMessage:function(e){t=e},getMessage:function(){return t}}};return{isValidXMLFormat:function(t){n||o();var r,a=new u,s=!0;try{e.Parser.fromString(t)}catch(e){r=n[i],s=!1}return a.setValidity(s),a.setMessage(r),a},isValidJSON:function(e){n||o();var t,r=new u,a=!0;try{JSON.parse(e)}catch(e){t=n[s],r.setMessage(t),a=!1}return r.setValidity(a),r},isValidRegEx:function(e){n||o();var r,s=new u,i=!0;try{var c=function(e){var r={},s=t.create({name:"INCORRECT_REGEX",message:n[a],notifyOff:!0});if("/"!=e[0])throw s;if("/"==(e=e.substr(1))[e.length-1])return r.pattern=e.substr(0,e.length-1),r;var i=e.split("/")[e.split("/").length-1],o=e.lastIndexOf("/"),u=e.substring(0,o);return r.pattern=u,r.modifier=i,r}(e);new RegExp(c.pattern,c.modifier)}catch(e){r=n[a],i=!1}return s.setValidity(i),s.setMessage(r),s}}}.apply(t,n))||(e.exports=a)},7108:(e,t,r)=>{var n,a;n=[r(2200),r(5389),r(8445),r(9502),r(9732),r(5728)],void 0===(a=function(e,t,r,n,a,s){function i(e,t){var n;"ERROR"===t?n=r.Type.ERROR:"WARNING"===t?n=r.Type.WARNING:"CONFIRMATION"===t&&(n=r.Type.CONFIRMATION),e&&r.create({type:n,message:e}).show()}return{pageInit:function(t){if(e.storeInitialRecordValues(t.currentRecord),"edit"==t.mode){var a="template.msg.cannotedittransactiontype",s=n.getStringMap([a])[a];t.currentRecord.getField({fieldId:"custpage_psg_ei_template_supported_transtype"}).isDisabled&&r.create({type:r.Type.INFORMATION,message:s}).show()}},fieldChanged:function(t){return e.validateFieldChanged(t)},validateLine:function(t){return e.validateSublist(t)},saveRecord:function(r){var n=t.executionContext,o=r.currentRecord,u=o.getValue("custpage_ei_custom_data_source"),c=o.getValue("custpage_ei_inbound_custom_data_source"),d=o.getValue("custpage_ei_custom_pl_outbound_validation"),l=o.getValue("custpage_ei_custom_pl_digital_signature"),p=e.validateTemplateFields(o,n),T=p.validationResult;if(!T.isValid())return i(T.getMessage(),"ERROR"),T.isValid();var f={templateContent:o.getValue({fieldId:"custrecord_psg_ei_template_content"}),contentType:o.getText({fieldId:"custrecord_psg_file_content_type"}).toUpperCase(),inboundXsd:o.getText({fieldId:"custrecord_edoc_template_xsd"}),outboundXsd:o.getText({fieldId:"custrecord_edoc_template_outbound_xsd"}),execContext:n,hasOutbound:p.hasatleastOneOutbound},_=s.resolveScript({scriptId:"customscript_ei_template_service_su",deploymentId:"customdeploy_ei_template_service_su"}),g=a.post({url:_,body:f}),v=JSON.parse(g.body),I=v.validity,y=v.type;if(!I){if("CONFIRM"!==y)return i(v.message,"ERROR"),I;I=confirm(v.message)}var S=o.getValue("custpage_psg_ei_temp_ei_status_txn_block");return o.setValue({fieldId:"custrecord_psg_ei_temp_edoc_status",value:S}),o.setValue({fieldId:"custrecord_ei_inject_data_source_impl",value:u}),o.setValue({fieldId:"custrecord_ei_in_inject_data_source_impl",value:c}),o.setValue({fieldId:"custrecord_ei_pl_outboundvalidation_impl",value:d}),o.setValue({fieldId:"custrecord_ei_pl_digital_signature_impl",value:l}),I},sublistChanged:function(t){var r=t.currentRecord,n=t.sublistId,a=t.operation;e.sublistChanged(r,n,a)}}}.apply(t,n))||(e.exports=a)},4148:(e,t,r)=>{var n,a;n=[r(7266),r(1303),r(6189),r(369),r(723),r(5389),r(9063)],void 0===(a=function(e,t,r,n,a,s,i){var o,u="outbound",c="inbound",d="purchase",l="sales",p="restemp",T="SUBSIDIARIES",f={};function _(){Object.keys(f).length||(f[17]={transCode:"VendBill",edocType:[c,u],type:e.Type.VENDOR_BILL,transGroupType:d,inactive:!1},f[29]={transCode:"CashRfnd",edocType:[u],type:e.Type.CASH_REFUND,transGroupType:l,inactive:!1},f[5]={transCode:"CashSale",edocType:[u],type:e.Type.CASH_SALE,transGroupType:l,inactive:!1},f[10]={transCode:"CustCred",edocType:[u,p],type:e.Type.CREDIT_MEMO,transGroupType:l,inactive:!1},f[6]={transCode:"Estimate",edocType:[u],type:e.Type.ESTIMATE,transGroupType:l,inactive:!1},f[7]={transCode:"CustInvc",edocType:[u,p],type:e.Type.INVOICE,transGroupType:l,inactive:!1},f[15]={transCode:"PurchOrd",edocType:[u,p],type:e.Type.PURCHASE_ORDER,transGroupType:d,inactive:!1},f[33]={transCode:"RtnAuth",edocType:[u],type:e.Type.RETURN_AUTHORIZATION,transGroupType:l,inactive:!1},f[9]={transCode:"CustPymt",edocType:[u],type:e.Type.CUSTOMER_PAYMENT,transGroupType:l,inactive:!1},f[32]={transCode:"ItemShip",edocType:[u],type:e.Type.ITEM_FULFILLMENT,transGroupType:l,inactive:!1},f[20]={transCode:"VendCred",edocType:[c,u],type:e.Type.VENDOR_CREDIT,transGroupType:d,inactive:!1},f[48]={transCode:"TrnfrOrd",edocType:[u],type:e.Type.TRANSFER_ORDER,transGroupType:l,inactive:!1},f[31]={transCode:"SalesOrd",edocType:[c],type:e.Type.SALES_ORDER,transGroupType:l,inactive:!1},f[40]={transCode:"CustDep",edocType:[u],type:e.Type.CUSTOMER_DEPOSIT,transGroupType:l,inactive:!1})}function g(e){_();var t,r,n=[];y();for(var a=0;a<e.length;a++)t=e[a],(r=f[t])&&r.edocType.indexOf(u)>=0&&n.push(r.transCode);return n}function v(){_();var e=[];for(var t in y(),f){var r=f[t];r.edocType.indexOf(u)>=0&&e.push(r.transCode)}return e}function I(){_();var e=[];for(var t in y(),f){var r=f[t];r.transGroupType===l&&e.push(r.transCode)}return e}function y(){_();var e=R();for(var t in e){var r=e[t];f[t]=r}}function S(e){return-1!==e.indexOf("custom")||-1!==e.indexOf("cutr")}function C(e){var t=!1;return!!e&&(e&&!b(e)&&(t=0===e.toLowerCase().indexOf("customtransaction")),t)}function E(e){var t=!1;return!!e&&(e&&!b(e)&&(t=0===e.toLowerCase().indexOf("customtransaction")),t)}function O(e){var t=!1;return!!e&&(e&&!b(e)&&(t=0===e.toLowerCase().indexOf("customsale")),t)}function m(e){var t=!1;return!!e&&(e&&!b(e)&&(t=0===e.toLowerCase().indexOf("custompurchase")),t)}function R(){if(!o||0===Object.keys(o).length){o={};var e=[];try{e=n.getRegisteredCTTIntIdArray();for(var t=0;t<e.length;t++){var r=n.getStringIdOfCTTFromInternalId(e[t]),a=void 0,s=void 0;C(r)||E(r)?(a="custom"+e[t],s=l):O(r)?(a="cutrsale"+e[t],s=l):m(r)&&(a="cutrprch"+e[t],s=d),a&&(o[e[t]]={edocType:[u],type:r,inactive:!1,transCode:a,transGroupType:s})}}catch(e){i.error(e.name,e.message+" "+e.stack)}}return o}function N(e){var t=[];for(var r in e)S(e[r])&&t.push(e[r]);for(var n=e.length-1;n>=0;n--)for(var a=0;a<t.length;a++)e[n]===t[a]&&e.splice(n,1);return e}function A(e){var t,r;_();var n=[];y();for(var a=0;a<e.length;a++)t=e[a],(r=f[t])&&r.edocType.indexOf(u)>=0&&S(r.transCode)&&n.push(r.transCode);return n}function h(){_();var e=[];for(var t in y(),f){var r=f[t];r.transGroupType===l&&S(r.transCode)&&e.push(r.transCode)}return e}function M(){_();var e=[],t=R();for(var r in t)e.push(t[r].transCode);return e}function b(e){return!isNaN(e)}return{getSupportedTransTypeLabels:function(e,t,r){_();var a=[];if(t){if(t.indexOf(c)>=0)for(var s in f)f[s].edocType.indexOf(c)>=0&&a.push(s);else if(t.indexOf(u)>=0)for(var o in f)f[o].edocType.indexOf(u)>=0&&a.push(o);else if(t.indexOf(p)>=0)for(var d in f)f[d].edocType.indexOf(p)>=0&&a.push(d)}else for(var l in f)a.push(l);if(!r)try{a=function(e){for(var t=n.getRegisteredCTTIntIdArray(),r=0;r<t.length;r++)-1===e.indexOf(t[r])&&e.push(t[r]);return e}(a)}catch(e){i.error(e.name,e.message+" "+e.stack)}if(a.length>0)for(var T=0;T<e.length;)-1!==a.indexOf(e[T].value)?T++:e.splice(T,1);else e=[];return e},getTransactionTypeFromCode:function(e){for(var t in _(),f)if(f[t].transCode===e)return f[t].type},getTransactionTypeFromId:function(e){return _(),f[e].type},getOutboundTransactionCodes:g,getInboundTransactionCodes:function(e){_();for(var t,r,n=[],a=0;a<e.length;a++)t=e[a],(r=f[t]).edocType.indexOf(c)>=0&&n.push(r.transCode);return n},getResponseTemplateTransactionCodes:function(e){_();for(var t,r,n=[],a=0;a<e.length;a++)t=e[a],(r=f[t]).edocType.indexOf(p)>=0&&n.push(r.transCode);return n},getInboundTransactionRecordTypes:function(e){_();for(var t,r,n=[],a=0;a<e.length;a++)t=e[a],(r=f[t]).edocType.indexOf(c)>=0&&n.push(r.type);return n},isValidOutboundTransactionType:function(e){_();var t=f[e];if(t&&t.edocType.indexOf(u)>=0)return!0;var r=R()[e];return!!(r&&r.edocType.indexOf(u)>=0)},isValidInboundTransactionType:function(e){_();var t=!1,r=f[e];return r&&r.edocType.indexOf(c)>=0&&(t=!0),t},isSalesTransaction:function(e,t){_();var r,n,a=!1;if(!1!==t&&y(),parseInt(e))r=f[parseInt(e)];else for(var s in f)(n=f[s]).transCode.toLowerCase()===e.toLowerCase()&&(r=n);return r&&r.transGroupType===l&&(a=!0),a},isPurchaseTransaction:function(e,t){_();var r,n,a=!1;if(!1!==t&&y(),parseInt(e))r=f[parseInt(e)];else for(var s in f)(n=f[s]).transCode.toLowerCase()===e.toLowerCase()&&(r=n);return r&&r.transGroupType===d&&(a=!0),a},getAllSalesTransactionCodes:I,getAllPurchaseTransactionIds:function(){_();var e=[];for(var t in y(),f)f[t].transGroupType===d&&e.push(t);return e},getAllOutboundTransactionCodes:v,getValidPayloadTransactionIDs:function(){_();var e=[],t=0;for(var r in f)f[r].inactive||(e[t++]=r);var n=R();for(var a in n)e[t++]=n[a].type;return e},getValidPayloadTransactionTypes:function(){_();var e=[];for(var t in f){var r=f[t];!1===r.inactive&&e.push(r.type)}var n=R();for(var a in n)e.push(n[a].type);return e},getTransactionFilters:function(e,r,n){_();var a=[];n?n.length>0?a=g(n):0===n.length&&(a=I()):a=v(),a=N(a);var i=[["type",t.Operator.ANYOF,a]];s.isFeatureInEffect(T)&&e&&i.push("AND",["formulatext: {subsidiary.country}",t.Operator.IS,e]);var o=[];a.length>0&&o.push(i);var u=[];return u.push(["custbody_psg_ei_status",t.Operator.ANYOF,r]),u.push("AND"),u.push(["mainline",t.Operator.IS,"T"]),u.push("AND"),u.push(o),u.push("AND"),u.push(["memorized",t.Operator.IS,"F"]),u},getTransactionFiltersQuery:function(e,t,n,o,u){_();var c=[],d=[];u?u.length>0?c=g(u):0===u.length&&(c=I()):c=v(),c=N(c);var l=s.isFeatureInEffect(T);return i.debug("getTransactionFiltersQuery():allowedCountry",n),i.debug("getTransactionFiltersQuery():subsidiaryId",t),l&&(n||t)&&(t&&d.push(e.createCondition({fieldId:"transactionlines.subsidiary",operator:r.Operator.EQUAL,values:t})),n&&d.push(e.createCondition({fieldId:"transactionlines.subsidiary.country",operator:r.Operator.IS,values:a.getFreeCountryISOCode(n)})),d.push(e.createCondition({fieldId:"transactionlines.mainline",operator:r.Operator.IS,values:!0}))),c.length>0&&d.push(e.createCondition({fieldId:"type",operator:r.Operator.ANY_OF,values:c})),d.push(e.createCondition({fieldId:"custbody_psg_ei_status",operator:r.Operator.ANY_OF,values:o})),d},getCustomTransactionFilters:function(e,r){_();var n=[];r?r.length>0?n=A(r):0===r.length&&(n=h()):n=M();var a=[["type",t.Operator.ANYOF,n]],s=[];n.length>0&&s.push(a);var i=[];return i.push(["custbody_psg_ei_status",t.Operator.ANYOF,e]),i.push("AND"),i.push(["mainline",t.Operator.IS,"T"]),i.push("AND"),i.push(s),i.push("AND"),i.push(["memorized",t.Operator.IS,"F"]),i},getCustomTransactionFiltersQuery:function(e,t,n){_();var a=[];n?n.length>0?a=A(n):0===n.length&&(a=h()):a=M();var s=[];return a.length>0&&s.push(e.createCondition({fieldId:"type",operator:r.Operator.ANY_OF,values:a})),s.push(e.createCondition({fieldId:"custbody_psg_ei_status",operator:r.Operator.ANY_OF,values:t})),s},isCustomTransactionType:function(e){return _(),b(e)&&(e=n.getStringIdOfCTTFromInternalId(e)),!!e&&(C(e=e.toLowerCase())||E(e)||O(e)||m(e))},isSalesStyleCTT:O,isPurchaseStyleCTT:m,isBasicStyleCTT:C,isJournalStyleCTT:E,getAllOutboundCttCodes:M,getOutboundCttCodes:A,getAllCttSalesTransactionCodes:h,removeCttTransCodes:N,getCTTMap:R,getAllInboundSalesTransactionIds:function(){_();var e=[];for(var t in y(),f){var r=f[t];r.transGroupType===l&&r.edocType.indexOf(c)>=0&&e.push(t)}return e},getAllPurchaseInboundTransactionIds:function(){_();var e=[];for(var t in y(),f){var r=f[t];r.transGroupType===d&&r.edocType.indexOf(c)>=0&&e.push(t)}return e},getEntityFieldIDFromTransactionRecord:function(t){var r="";switch(t.type){case e.Type.CUSTOMER_DEPOSIT:case e.Type.CUSTOMER_PAYMENT:r="customer";break;case e.Type.CASH_REFUND:case e.Type.CASH_SALE:case e.Type.CREDIT_MEMO:case e.Type.ESTIMATE:case e.Type.INVOICE:case e.Type.RETURN_AUTHORIZATION:case e.Type.VENDOR_BILL:case e.Type.PURCHASE_ORDER:case e.Type.ITEM_FULFILLMENT:case e.Type.VENDOR_CREDIT:case e.Type.SALES_ORDER:case e.Type.TRANSFER_ORDER:default:r="entity"}return r},getRecordType:function(e){_();var t=null;if(e)for(var r in f){var n=f[r];n.transCode===e&&(t=n.type)}return t}}}.apply(t,n))||(e.exports=a)},7789:(e,t)=>{var r;void 0===(r=function(){return{FEATURES:{SUBSIDIARIES:"subsidiaries"},RECORD_TYPES:{INBOUND_EDOCUMENT:"customrecord_psg_ei_inbound_edoc",TRANSACTION_RESPONSE:"customrecord_psg_ei_trans_res",TRANSACTION_RESPONSE_TYPE:"customrecord_psg_ei_response_status",TRANSACTION_RESPONSE_TEMPLATE:"customrecord_psg_ei_transres_template",EI_SENDING_METHOD:"customrecord_ei_sending_method",SUBSIDIARY_PREF:"customrecord_psg_ei_sub_prefs_data",EDOCUMENT_TEMPLATE:"custbody_psg_ei_template"},CUSTOM_LISTS:{DIRECTION_TYPE:"customlist_psg_ei_direction_type",TRANSACTION_RESPONSE_STATUS:"customlist_psg_ei_sent_status",EDOC_STATUS_LIST:"customlist_psg_ei_status",AUDIT_TRAIL_LIST:"customlist_psg_ei_audit_trail_events"},SCRIPTS:{GENERATE_TRANSACTION_RESPONSE:"customscript_psg_ei_generate_trans_resp",SEND_TRANSACTION_RESPONSE:"customscript_psg_ei_send_trans_res_su",PREVIEW_DOWNLOAD:"customscript_ei_content_service_su"},CUSTPAGE_BUTTONS:{GENERATE_TRANSACTION_RESPONSE:"custpage_generate_ar_ei_button",SEND_TRANSACTION_RESPONSE:"custpage_send_ar_ei_button"},CORE_FIELDS:{INTERNAL_ID:"internalid",SCRIPT_ID:"scriptid",ID:"id",INACTIVE:"isinactive",SUBSIDIARY:"subsidiary",ENTITY:"entity",CUSTOM_STANDARD:"customstandard",TYPE:"type",TRAN_ID:"tranid",RECORD_TYPE:"recordType",APPROVAL_STATUS:"approvalstatus",TRANSACTION_STYLE:"transactionstyle"},SUITEAPPS:{EI:{ID:"436209",NAME:"Electronic Invoicing"}},LICENSES:{EI:"Electronic Invoicing",NSEB:"Netsuite Electronic Business",Avalara:"Avalara Processing For Netsuite Electronic Invoicing"},ROLE_PERMISSIONS:{GEN_AND_SEND_AR:"custrecord_permission_gen_and_send_ar"},TRANSLATE_TYPES:{MESSAGE:"message",TITLE:"title",LABEL:"label"},CUSTOM_TRANSACTION_STYLE:{BASIC:"BASIC",JOURNAL:"JOURNAL",PURCHASE:"PURCHASE",SALES:"SALES"}}}.apply(t,[]))||(e.exports=r)},6686:(e,t,r)=>{var n,a;n=[r(3776)],void 0===(a=function(e){return{showConfirmationMessage:function(t,r){return e.setString(t),e.replaceParameters(r),confirm(e.toString())},showMessage:function(t,r){e.setString(t),e.replaceParameters(r),alert(e.toString())}}}.apply(t,n))||(e.exports=a)},3776:(e,t,r)=>{var n,a;n=[r(7903)],void 0===(a=function(e){var t;return{setString:function(r){if(!r)throw e.create({name:"REQUIRED_PARAM_MISSING",message:"Parameter of method setString of String Formatter must not be null or undefined."});t=r},replaceParameters:function(e){for(var r in e){var n=new RegExp("\\{"+r+"\\}","g");t=t.replace(n,e[r])}},toString:function(){return t.toString()}}}.apply(t,n))||(e.exports=a)},9502:(e,t,r)=>{var n,a;n=[r(5389),r(6834)],void 0===(a=function(e,t){var r;function n(n){r||(r=e.getCurrentUser().getPreference("LANGUAGE")),n=(n=n.toLowerCase()).replace(new RegExp(".".replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),"_");var a="";try{a=t.get({collection:"custcollection_ei_translations",key:n,locale:r})()}catch(e){log.error(e.name,e.message+"\n"+e.stack)}return a}return{getString:n,getStringMap:function(e){for(var t={},r=0;r<e.length;r++){var a=e[r];t[a]=n(a)}return t},setLocale:function(e){r=e}}}.apply(t,n))||(e.exports=a)},3899:(e,t)=>{var r;void 0===(r=function(){function e(){var e,t;this.setValidity=function(t){e=t},this.isValid=function(){return e},this.setMessage=function(e){t=e},this.getMessage=function(){return t}}return{create:function(){return new e}}}.apply(t,[]))||(e.exports=r)},7903:t=>{"use strict";t.exports=e},9732:e=>{"use strict";e.exports=t},9063:e=>{"use strict";e.exports=r},6189:e=>{"use strict";e.exports=n},7266:e=>{"use strict";e.exports=a},5389:e=>{"use strict";e.exports=s},1303:e=>{"use strict";e.exports=i},6834:e=>{"use strict";e.exports=o},8445:e=>{"use strict";e.exports=u},5728:e=>{"use strict";e.exports=c},2424:e=>{"use strict";e.exports=d}},p={},function e(t){var r=p[t];if(void 0!==r)return r.exports;var n=p[t]={exports:{}};return l[t](n,n.exports,e),n.exports}(7108);var l,p}));