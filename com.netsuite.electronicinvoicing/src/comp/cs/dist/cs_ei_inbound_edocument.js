/**
 * @preserve
 *
 * @NApiVersion 2.1
 * @NScriptName Inbound E-Document CS
 * @NScriptId _ei_inbound_edocument_cs
 * @NScriptType clientscript
 * @NModuleScope TargetAccount
 */

/*! For license information please see cs_ei_inbound_edocument.js.LICENSE.txt */
define(["N/currentRecord","N/error","N/https","N/log","N/query","N/record","N/runtime","N/search","N/translation","N/ui/message","N/url","N/xml"],((e,t,r,n,a,i,s,o,u,c,d,p)=>{return l={723:(e,t)=>{var r;void 0===(r=function(){var e={3:"AF",247:"AX",6:"AL",62:"DZ",12:"AS",1:"AD",9:"AO",5:"AI",10:"AQ",4:"AG",11:"AR",7:"AM",15:"AW",14:"AU",13:"AT",16:"AZ",31:"BS",23:"BH",19:"BD",18:"BB",35:"BY",20:"BE",36:"BZ",25:"BJ",27:"BM",32:"BT",29:"BO",250:"BQ",17:"BA",34:"BW",33:"BV",30:"BR",106:"IO",28:"BN",22:"BG",21:"BF",24:"BI",117:"KH",46:"CM",37:"CA",249:"IC",53:"CV",124:"KY",40:"CF",248:"EA",212:"TD",45:"CL",47:"CN",54:"CX",38:"CC",48:"CO",119:"KM",39:"CD",41:"CG",44:"CK",49:"CR",43:"CI",98:"HR",52:"CU",251:"CW",55:"CY",56:"CZ",59:"DK",58:"DJ",60:"DM",61:"DO",221:"TL",63:"EC",65:"EG",208:"SV",88:"GQ",67:"ER",64:"EE",69:"ET",72:"FK",74:"FO",71:"FJ",70:"FI",75:"FR",80:"GF",175:"PF",213:"TF",76:"GA",85:"GM",79:"GE",57:"DE",82:"GH",83:"GI",89:"GR",84:"GL",78:"GD",87:"GP",92:"GU",91:"GT",81:"GG",86:"GN",93:"GW",94:"GY",99:"HT",96:"HM",233:"VA",97:"HN",95:"HK",100:"HU",109:"IS",105:"IN",101:"ID",108:"IR",107:"IQ",102:"IE",104:"IM",103:"IL",110:"IT",112:"JM",114:"JP",111:"JE",113:"JO",125:"KZ",115:"KE",118:"KI",121:"KP",122:"KR",254:"XK",123:"KW",116:"KG",126:"LA",135:"LV",127:"LB",132:"LS",131:"LR",136:"LY",129:"LI",133:"LT",134:"LU",148:"MO",144:"MK",142:"MG",156:"MW",158:"MY",155:"MV",145:"ML",153:"MT",143:"MH",150:"MQ",151:"MR",154:"MU",243:"YT",157:"MX",73:"FM",139:"MD",138:"MC",147:"MN",140:"ME",152:"MS",137:"MA",159:"MZ",146:"MM",160:"NA",169:"NR",168:"NP",166:"NL",161:"NC",171:"NZ",165:"NI",162:"NE",164:"NG",170:"NU",163:"NF",149:"MP",167:"NO",172:"OM",178:"PK",185:"PW",173:"PA",176:"PG",186:"PY",174:"PE",177:"PH",181:"PN",179:"PL",184:"PT",182:"PR",187:"QA",188:"RE",189:"RO",190:"RU",191:"RW",26:"BL",198:"SH",120:"KN",128:"LC",141:"MF",234:"VC",241:"WS",203:"SM",207:"ST",192:"SA",204:"SN",50:"RS",194:"SC",202:"SL",197:"SG",252:"SX",201:"SK",199:"SI",193:"SB",205:"SO",244:"ZA",90:"GS",253:"SS",68:"ES",130:"LK",183:"PS",180:"PM",195:"SD",206:"SR",200:"SJ",210:"SZ",196:"SE",42:"CH",209:"SY",225:"TW",216:"TJ",226:"TZ",215:"TH",214:"TG",217:"TK",220:"TO",223:"TT",219:"TN",222:"TR",218:"TM",211:"TC",224:"TV",228:"UG",227:"UA",2:"AE",77:"GB",230:"US",231:"UY",229:"UM",232:"UZ",239:"VU",235:"VE",238:"VN",236:"VG",237:"VI",240:"WF",66:"EH",242:"YE",245:"ZM",246:"ZW"};return{getFreeCountryISOCode:function(t){return e[t]},getFreeCountryInternalId:function(t){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t)return r}}}.apply(t,[]))||(e.exports=r)},369:(e,t,r)=>{var n,a;n=[r(1303),r(6189),r(5389),r(7789)],void 0===(a=function(e,t,r,n){function a(e){var r,n,a={success:!1,message:"",cttDetails:{}};if(!e)return a.message="Invalid Transaction Type ID.",a.success=!1,a;if(!i())return a.message="Custom Transactions feature should be enabled.",a.success=!1,a;isNaN(e)?(r="scriptid",n=t.Operator.IS):(r="id",n=t.Operator.EQUAL);try{var s=t.create({type:t.Type.CUSTOM_TRANSACTION_TYPE});s.condition=s.createCondition({fieldId:r,operator:n,values:e}),s.columns=[s.createColumn({fieldId:"name"}),s.createColumn({fieldId:"id"}),s.createColumn({fieldId:"scriptid"})];var o=s.run().results;if(0!==o.length){a.success=!0,a.message="Found CTT Details";for(var u=o.length-1;u>=0;u--)log.debug("EICTTMAN","Result of search on CTT: "+o[u].values),a.cttDetails.name=o[u].values[0],a.cttDetails.internalId=o[u].values[1],a.cttDetails.stringId=o[u].values[2]}else a.success=!1,a.message="The Transaction Type does not exist in the account."}catch(e){log.error(e.name,e.message+e.stack),a.success=!1,a.message="An error occurred during search on CTT. Details: "+e.name+". "+e.message}return a}function i(){return r.isFeatureInEffect("CUSTOMTRANSACTIONS")}return{getRegisteredCTTIntIdArray:function(){for(var t="custrecord_ei_registered_ctt",r=e.lookupFields({type:"customrecord_ei_ctt_map",id:1,columns:t})[t],n=[],a=0;a<r.length;a++)n.push(r[a].value);return log.debug("EICTTMAN","IDs in EICTTMAP: "+JSON.stringify(n)),n},getCTTDetails:a,getStringIdOfCTTFromInternalId:function(e){if(e)return a(e).cttDetails.stringId},getInternalIdOfCTTFromStringId:function(e){if(e)return a(e).cttDetails.internalId},isCustomTransactionFeatureEnabled:i,getCTTTransStyle:function(e){var r=null;if(!i())return r;var a=t.create({type:t.Type.CUSTOM_TRANSACTION_TYPE}),s=a.createCondition({fieldId:n.CORE_FIELDS.SCRIPT_ID,operator:t.Operator.IS,values:e});a.condition=a.and(s),a.columns=[a.createColumn({fieldId:n.CORE_FIELDS.TRANSACTION_STYLE,context:t.FieldContext.RAW})];var o=a.run().asMappedResults();return 1==o.length&&(r=o[0].transactionstyle),r}}}.apply(t,n))||(e.exports=a)},2689:(e,t,r)=>{var n,a;n=[r(3899),r(2424),r(7903),r(9502),r(3623)],void 0===(a=function(e,t,r,n,a){var i,s="inboundedocument.invalidxml",o="inboundedocument.invalidxmlfile",u="inboundedocument.invalidpdffile",c="msg_invalid_xml",d="msg_invalid_xml_file",p="msg_invalid_pdf_file";function l(){var e=[s,o,u],t=n.getStringMap(e);(i={})[c]=t[s],i[d]=t[o],i[p]=t[u]}return{validateEDocumentContent:function(r){log.debug("app_einvoice_inbound_edocument_validator: validateEDocumentContent","started");var n=[];return n.push(function(r){log.debug("app_einvoice_inbound_edocument_validator: isValidXml","started");var n=!0;i||l();var a=e.create();try{t.Parser.fromString(r)}catch(e){log.error("app_einvoice_inbound_edocument_validator: isValidXml: error",e),n=!1}return a.setValidity(n),a.isValid()||a.setMessage(i[c]),log.debug("app_einvoice_inbound_edocument_validator: isValidXml","ended"),a}(r)),a.consolidateValidationResults(n),log.debug("app_einvoice_inbound_edocument_validator: validateEDocumentContent","ended"),a},validateFilename:function(t,n){var s=[];return s.push(function(t){var n,a;if(i||l(),!t)throw n={name:"REQUIRED_PARAM_MISSING",message:"Inbound e-document filename is required for validation.",notifyOff:!0},log.error(n.name,n.message),r.create(n);var s=e.create();return a=/.xml$/i.test(t),s.setValidity(a),s.isValid()||s.setMessage(i[d]),s}(t)),n&&s.push(function(t){var r;i||l();var n=e.create();return r=/.pdf$/i.test(t),n.setValidity(r),n.isValid()||n.setMessage(i[p]),n}(n)),a.consolidateValidationResults(s),a}}}.apply(t,n))||(e.exports=a)},2903:(e,t,r)=>{var n,a;n=[r(2689),r(8445),r(5728),r(9732),r(7884),r(6478),r(5389),r(4148),r(9502),r(3776)],void 0===(a=function(e,t,r,n,a,i,s,o,u,c){var d="custrecord_psg_ei_inbound_vendor",p="custrecord_psg_ei_inbound_customer",l="custrecord_psg_ei_inbound_transtype",T="custrecord_psg_ei_inbound_template",_="custrecord_psg_ei_inbound_temp_customer",g="custrecord_psg_ei_inbound_content",v="custrecord_psg_ei_attach_edoc",f="inboundedocument.convert.information",y="Conversion of this inbound E-Document is in progress.",S="inboundedocument.convert.alreadyinprogress.information",I="Conversion of this inbound E-Document is already in progress.",C="Sales order with the same PO# already exists. Do you want to create a new sales order with the same PO#?",m="inboundedocument.cancel.confirmation",E="Are you sure you want to cancel this inbound e-document?",O="custpage_psg_ei_inbound_transtype",A=[],h=!1;function N(){0===A.length&&(A=u.getStringMap([f,S,m]),y=A[f]||y,C=A["inboundedocument.convert.duplicate.so.confirmation"]||C,I=A[S]||I,E=A[m]||E)}function R(e,t,r){e.isVisible=r,e.isDisplay=r,t.isVisible=r,t.isDisplay=r,e.isMandatory=r,t.isMandatory=r}return{pageInit:function(e){var t=e.currentRecord,r=t.getValue(O),n=t.getField(p),a=t.getField(d),i=t.getField(_),s=t.getField(T);s.label=u.getString("label.ui.custrecord.psg.ei.inbound.template.entity")||"E-Document Template",i.label=u.getString("label.ui.custrecord.psg.ei.inbound.template.entity")||"E-Document Template",o.isSalesTransaction(r)?(R(a,s,!1),n.isMandatory=!0,i.isMandatory=!0):(R(n,i,!1),a.isMandatory=!0,s.isMandatory=!0)},fieldChanged:function(e){var t=e.currentRecord,a=t.getValue(d),i=t.getValue(p),s=t.getValue(v),u=t.getValue(T),c=t.getField(p),f=t.getField(d),y=t.getField(_),S=t.getField(T);if(e.fieldId===O){var I=t.getValue(O);t.setValue({fieldId:l,value:I}),o.isSalesTransaction(I)?(R(f,S,!1),t.setValue(d,""),R(c,y,!0),u=t.getValue(_)):(R(c,y,!1),t.setValue(p,""),R(f,S,!0))}if(-1!==[l,v].indexOf(e.fieldId)){e.fieldId===v&&t.setValue({fieldId:g,value:""});var C=t.getValue(g);(s||C)&&!u&&(i||a)&&function(e){var t=r.resolveScript({scriptId:"customscript_ei_xsdvalidation_service_su",deploymentId:"customdeploy_ei_xsdvalidation_service_su"}),a=e.getValue("custrecord_psg_ei_edoc_standard_vendor"),i=e.getValue(l),s=e.getValue(d),u=T;o.isSalesTransaction(i)&&(s=e.getValue(p),a=e.getValue("custrecord_psg_ei_edoc_standard_customer"),u=_),n.post.promise({url:t,body:{entityId:s,edocPackage:a,tranType:i,xmlFile:e.getValue(v),xmlContent:e.getValue(g)}}).then((function(t){var r=JSON.parse(t.body);e.setValue({fieldId:u,value:r.id})}))}(t)}},saveRecord:function(t){var r=t.currentRecord,n=r.getValue(l),a=r.getField(p),s=r.getField(d),f=r.getField(v),y=[],S=u.getString("alert.ui.custrecord.psg.ei.inbound")||"Please enter value(s) for: {FIELDS_LIST}";if(o.isSalesTransaction(n)?(r.getValue(p)||y.push(a.label),r.getValue(_)||y.push(u.getString("label.ui.custrecord.psg.ei.inbound.template.entity")||"E-Document Template")):(r.getValue(d)||y.push(s.label),r.getValue(T)||y.push(u.getString("label.ui.custrecord.psg.ei.inbound.template.entity")||"E-Document Template")),r.getValue(v)||r.getValue(g)||y.push(f.label),y.length){var I={FIELDS_LIST:y.join(", ")};return c.setString(S),c.replaceParameters(I),S=c.toString(),alert(S),!1}var C,m,E=!0,O=r.getValue({fieldId:v}),A=r.getValue({fieldId:"custrecord_psg_ei_attach_pdf"}),h=i.loadEdocFile(O),N=A?i.loadEdocFile(A):null,R=h.name;if(N&&(m=N.name),R&&((C=e.validateFilename(R,m)).isSuccessful()?r.setValue({fieldId:"name",value:R}):(alert(C.getMessage()),E=!1),E)){var b=h.content;(C=e.validateEDocumentContent(b)).isSuccessful()?r.setValue({fieldId:g,value:b}):(alert(C.getMessage()),E=!1)}return E},convert:function(e,i,o){if(N(),h)alert(I);else{h=!0,function(e,r){if("2017.2"===s.version){var n=[];n.push('<div style="border: 1px solid #417ed9;background-color: #CFEEFC;;width: 1000px;margin: 1em 0;padding: 1em; font-size: 1.1em;">'),n.push(r),n.push("</div>");var a=n.join("");e.setValue({fieldId:"custpage_psg_ei_inbound_banner_msg",value:a})}else t.create({type:t.Type.INFORMATION,message:r}).show()}(a.get(),y);var u=r.resolveScript({scriptId:"customscript_ei_conversion_service_su",deploymentId:"customdeploy_ei_conversion_service_su"});n.post.promise({url:u,body:{recId:e,recType:i,tranType:o,isParseEdoc:!0}}).then((function(e){var t=JSON.parse(e.body);if(!t.success)throw t;if(t.data.duplicateSoArr.length&&!confirm(C))throw t;return{content:t.data.content,duplicateSoArr:t.data.duplicateSoArr}})).then((function(t){return n.post.promise({url:u,body:{recId:e,recType:i,tranType:o,parsedContent:JSON.stringify(t.content),duplicateSoData:JSON.stringify(t.duplicateSoArr)}})})).then((function(e){var t=JSON.parse(e.body);if(!t.success||"c"!==t.data.messageType&&"i"!==t.data.messageType)throw t;var n={};t.data.duplicateSoArr.length&&(n={ei_process:"conversion",ei_bid:t.data.bundleId,ei_mc:t.data.messageCode,ei_t:t.data.messageType});var a=r.resolveRecord({recordType:t.data.transactionType,recordId:t.data.transactionId,isEditMode:!1,params:n});window.location=a+"&whence="})).catch((function(t){var n=t,a={};n.data.reload||(a={ei_process:"conversion",ei_bid:n.data.bundleId,ei_mc:n.data.messageCode,ei_t:n.data.messageType});var s=r.resolveRecord({recordType:i,recordId:e,isEditMode:!1,params:a});window.location=s+"&whence="}))}},cancel:function(e,t){if(N(),h)alert(y);else if(confirm(E)){var a=r.resolveScript({scriptId:"customscript_ei_cancellation_service_su",deploymentId:"customdeploy_ei_cancellation_service_su"}),i=n.post({url:a,body:{recId:e,recType:t}}),s=JSON.parse(i.body),o={ei_process:"cancel",ei_bid:s.data.bundleId,ei_mc:s.data.messageCode,ei_t:s.data.messageType},u=r.resolveRecord({recordId:e,recordType:t,isEditMode:!1,params:o});window.location=u+"&whence="}},preview:function(e,t){var n={edocId:e,fileFormat:t,doctype:"inbound",type:"customrecord_psg_ei_inbound_edoc",command:"preview"},a=r.resolveScript({scriptId:"customscript_ei_content_service_su",deploymentId:"customdeploy_ei_content_service_su",params:n});window.open(a,"previewWindow","location=no,width=600,height=500,menubar=yes,scrollbars=yes,resizable=yes")}}}.apply(t,n))||(e.exports=a)},4148:(e,t,r)=>{var n,a;n=[r(7266),r(1303),r(6189),r(369),r(723),r(5389),r(9063)],void 0===(a=function(e,t,r,n,a,i,s){var o,u="outbound",c="inbound",d="purchase",p="sales",l="restemp",T="SUBSIDIARIES",_={};function g(){Object.keys(_).length||(_[17]={transCode:"VendBill",edocType:[c,u],type:e.Type.VENDOR_BILL,transGroupType:d,inactive:!1},_[29]={transCode:"CashRfnd",edocType:[u],type:e.Type.CASH_REFUND,transGroupType:p,inactive:!1},_[5]={transCode:"CashSale",edocType:[u],type:e.Type.CASH_SALE,transGroupType:p,inactive:!1},_[10]={transCode:"CustCred",edocType:[u,l],type:e.Type.CREDIT_MEMO,transGroupType:p,inactive:!1},_[6]={transCode:"Estimate",edocType:[u],type:e.Type.ESTIMATE,transGroupType:p,inactive:!1},_[7]={transCode:"CustInvc",edocType:[u,l],type:e.Type.INVOICE,transGroupType:p,inactive:!1},_[15]={transCode:"PurchOrd",edocType:[u,l],type:e.Type.PURCHASE_ORDER,transGroupType:d,inactive:!1},_[33]={transCode:"RtnAuth",edocType:[u],type:e.Type.RETURN_AUTHORIZATION,transGroupType:p,inactive:!1},_[9]={transCode:"CustPymt",edocType:[u],type:e.Type.CUSTOMER_PAYMENT,transGroupType:p,inactive:!1},_[32]={transCode:"ItemShip",edocType:[u],type:e.Type.ITEM_FULFILLMENT,transGroupType:p,inactive:!1},_[20]={transCode:"VendCred",edocType:[c,u],type:e.Type.VENDOR_CREDIT,transGroupType:d,inactive:!1},_[48]={transCode:"TrnfrOrd",edocType:[u],type:e.Type.TRANSFER_ORDER,transGroupType:p,inactive:!1},_[31]={transCode:"SalesOrd",edocType:[c],type:e.Type.SALES_ORDER,transGroupType:p,inactive:!1},_[40]={transCode:"CustDep",edocType:[u],type:e.Type.CUSTOMER_DEPOSIT,transGroupType:p,inactive:!1})}function v(e){g();var t,r,n=[];S();for(var a=0;a<e.length;a++)t=e[a],(r=_[t])&&r.edocType.indexOf(u)>=0&&n.push(r.transCode);return n}function f(){g();var e=[];for(var t in S(),_){var r=_[t];r.edocType.indexOf(u)>=0&&e.push(r.transCode)}return e}function y(){g();var e=[];for(var t in S(),_){var r=_[t];r.transGroupType===p&&e.push(r.transCode)}return e}function S(){g();var e=A();for(var t in e){var r=e[t];_[t]=r}}function I(e){return-1!==e.indexOf("custom")||-1!==e.indexOf("cutr")}function C(e){var t=!1;return!!e&&(e&&!D(e)&&(t=0===e.toLowerCase().indexOf("customtransaction")),t)}function m(e){var t=!1;return!!e&&(e&&!D(e)&&(t=0===e.toLowerCase().indexOf("customtransaction")),t)}function E(e){var t=!1;return!!e&&(e&&!D(e)&&(t=0===e.toLowerCase().indexOf("customsale")),t)}function O(e){var t=!1;return!!e&&(e&&!D(e)&&(t=0===e.toLowerCase().indexOf("custompurchase")),t)}function A(){if(!o||0===Object.keys(o).length){o={};var e=[];try{e=n.getRegisteredCTTIntIdArray();for(var t=0;t<e.length;t++){var r=n.getStringIdOfCTTFromInternalId(e[t]),a=void 0,i=void 0;C(r)||m(r)?(a="custom"+e[t],i=p):E(r)?(a="cutrsale"+e[t],i=p):O(r)&&(a="cutrprch"+e[t],i=d),a&&(o[e[t]]={edocType:[u],type:r,inactive:!1,transCode:a,transGroupType:i})}}catch(e){s.error(e.name,e.message+" "+e.stack)}}return o}function h(e){var t=[];for(var r in e)I(e[r])&&t.push(e[r]);for(var n=e.length-1;n>=0;n--)for(var a=0;a<t.length;a++)e[n]===t[a]&&e.splice(n,1);return e}function N(e){var t,r;g();var n=[];S();for(var a=0;a<e.length;a++)t=e[a],(r=_[t])&&r.edocType.indexOf(u)>=0&&I(r.transCode)&&n.push(r.transCode);return n}function R(){g();var e=[];for(var t in S(),_){var r=_[t];r.transGroupType===p&&I(r.transCode)&&e.push(r.transCode)}return e}function b(){g();var e=[],t=A();for(var r in t)e.push(t[r].transCode);return e}function D(e){return!isNaN(e)}return{getSupportedTransTypeLabels:function(e,t,r){g();var a=[];if(t){if(t.indexOf(c)>=0)for(var i in _)_[i].edocType.indexOf(c)>=0&&a.push(i);else if(t.indexOf(u)>=0)for(var o in _)_[o].edocType.indexOf(u)>=0&&a.push(o);else if(t.indexOf(l)>=0)for(var d in _)_[d].edocType.indexOf(l)>=0&&a.push(d)}else for(var p in _)a.push(p);if(!r)try{a=function(e){for(var t=n.getRegisteredCTTIntIdArray(),r=0;r<t.length;r++)-1===e.indexOf(t[r])&&e.push(t[r]);return e}(a)}catch(e){s.error(e.name,e.message+" "+e.stack)}if(a.length>0)for(var T=0;T<e.length;)-1!==a.indexOf(e[T].value)?T++:e.splice(T,1);else e=[];return e},getTransactionTypeFromCode:function(e){for(var t in g(),_)if(_[t].transCode===e)return _[t].type},getTransactionTypeFromId:function(e){return g(),_[e].type},getOutboundTransactionCodes:v,getInboundTransactionCodes:function(e){g();for(var t,r,n=[],a=0;a<e.length;a++)t=e[a],(r=_[t]).edocType.indexOf(c)>=0&&n.push(r.transCode);return n},getResponseTemplateTransactionCodes:function(e){g();for(var t,r,n=[],a=0;a<e.length;a++)t=e[a],(r=_[t]).edocType.indexOf(l)>=0&&n.push(r.transCode);return n},getInboundTransactionRecordTypes:function(e){g();for(var t,r,n=[],a=0;a<e.length;a++)t=e[a],(r=_[t]).edocType.indexOf(c)>=0&&n.push(r.type);return n},isValidOutboundTransactionType:function(e){g();var t=_[e];if(t&&t.edocType.indexOf(u)>=0)return!0;var r=A()[e];return!!(r&&r.edocType.indexOf(u)>=0)},isValidInboundTransactionType:function(e){g();var t=!1,r=_[e];return r&&r.edocType.indexOf(c)>=0&&(t=!0),t},isSalesTransaction:function(e,t){g();var r,n,a=!1;if(!1!==t&&S(),parseInt(e))r=_[parseInt(e)];else for(var i in _)(n=_[i]).transCode.toLowerCase()===e.toLowerCase()&&(r=n);return r&&r.transGroupType===p&&(a=!0),a},isPurchaseTransaction:function(e,t){g();var r,n,a=!1;if(!1!==t&&S(),parseInt(e))r=_[parseInt(e)];else for(var i in _)(n=_[i]).transCode.toLowerCase()===e.toLowerCase()&&(r=n);return r&&r.transGroupType===d&&(a=!0),a},getAllSalesTransactionCodes:y,getAllPurchaseTransactionIds:function(){g();var e=[];for(var t in S(),_)_[t].transGroupType===d&&e.push(t);return e},getAllOutboundTransactionCodes:f,getValidPayloadTransactionIDs:function(){g();var e=[],t=0;for(var r in _)_[r].inactive||(e[t++]=r);var n=A();for(var a in n)e[t++]=n[a].type;return e},getValidPayloadTransactionTypes:function(){g();var e=[];for(var t in _){var r=_[t];!1===r.inactive&&e.push(r.type)}var n=A();for(var a in n)e.push(n[a].type);return e},getTransactionFilters:function(e,r,n){g();var a=[];n?n.length>0?a=v(n):0===n.length&&(a=y()):a=f(),a=h(a);var s=[["type",t.Operator.ANYOF,a]];i.isFeatureInEffect(T)&&e&&s.push("AND",["formulatext: {subsidiary.country}",t.Operator.IS,e]);var o=[];a.length>0&&o.push(s);var u=[];return u.push(["custbody_psg_ei_status",t.Operator.ANYOF,r]),u.push("AND"),u.push(["mainline",t.Operator.IS,"T"]),u.push("AND"),u.push(o),u.push("AND"),u.push(["memorized",t.Operator.IS,"F"]),u},getTransactionFiltersQuery:function(e,t,n,o,u){g();var c=[],d=[];u?u.length>0?c=v(u):0===u.length&&(c=y()):c=f(),c=h(c);var p=i.isFeatureInEffect(T);return s.debug("getTransactionFiltersQuery():allowedCountry",n),s.debug("getTransactionFiltersQuery():subsidiaryId",t),p&&(n||t)&&(t&&d.push(e.createCondition({fieldId:"transactionlines.subsidiary",operator:r.Operator.EQUAL,values:t})),n&&d.push(e.createCondition({fieldId:"transactionlines.subsidiary.country",operator:r.Operator.IS,values:a.getFreeCountryISOCode(n)})),d.push(e.createCondition({fieldId:"transactionlines.mainline",operator:r.Operator.IS,values:!0}))),c.length>0&&d.push(e.createCondition({fieldId:"type",operator:r.Operator.ANY_OF,values:c})),d.push(e.createCondition({fieldId:"custbody_psg_ei_status",operator:r.Operator.ANY_OF,values:o})),d},getCustomTransactionFilters:function(e,r){g();var n=[];r?r.length>0?n=N(r):0===r.length&&(n=R()):n=b();var a=[["type",t.Operator.ANYOF,n]],i=[];n.length>0&&i.push(a);var s=[];return s.push(["custbody_psg_ei_status",t.Operator.ANYOF,e]),s.push("AND"),s.push(["mainline",t.Operator.IS,"T"]),s.push("AND"),s.push(i),s.push("AND"),s.push(["memorized",t.Operator.IS,"F"]),s},getCustomTransactionFiltersQuery:function(e,t,n){g();var a=[];n?n.length>0?a=N(n):0===n.length&&(a=R()):a=b();var i=[];return a.length>0&&i.push(e.createCondition({fieldId:"type",operator:r.Operator.ANY_OF,values:a})),i.push(e.createCondition({fieldId:"custbody_psg_ei_status",operator:r.Operator.ANY_OF,values:t})),i},isCustomTransactionType:function(e){return g(),D(e)&&(e=n.getStringIdOfCTTFromInternalId(e)),!!e&&(C(e=e.toLowerCase())||m(e)||E(e)||O(e))},isSalesStyleCTT:E,isPurchaseStyleCTT:O,isBasicStyleCTT:C,isJournalStyleCTT:m,getAllOutboundCttCodes:b,getOutboundCttCodes:N,getAllCttSalesTransactionCodes:R,removeCttTransCodes:h,getCTTMap:A,getAllInboundSalesTransactionIds:function(){g();var e=[];for(var t in S(),_){var r=_[t];r.transGroupType===p&&r.edocType.indexOf(c)>=0&&e.push(t)}return e},getAllPurchaseInboundTransactionIds:function(){g();var e=[];for(var t in S(),_){var r=_[t];r.transGroupType===d&&r.edocType.indexOf(c)>=0&&e.push(t)}return e},getEntityFieldIDFromTransactionRecord:function(t){var r="";switch(t.type){case e.Type.CUSTOMER_DEPOSIT:case e.Type.CUSTOMER_PAYMENT:r="customer";break;case e.Type.CASH_REFUND:case e.Type.CASH_SALE:case e.Type.CREDIT_MEMO:case e.Type.ESTIMATE:case e.Type.INVOICE:case e.Type.RETURN_AUTHORIZATION:case e.Type.VENDOR_BILL:case e.Type.PURCHASE_ORDER:case e.Type.ITEM_FULFILLMENT:case e.Type.VENDOR_CREDIT:case e.Type.SALES_ORDER:case e.Type.TRANSFER_ORDER:default:r="entity"}return r},getRecordType:function(e){g();var t=null;if(e)for(var r in _){var n=_[r];n.transCode===e&&(t=n.type)}return t}}}.apply(t,n))||(e.exports=a)},7789:(e,t)=>{var r;void 0===(r=function(){return{FEATURES:{SUBSIDIARIES:"subsidiaries"},RECORD_TYPES:{INBOUND_EDOCUMENT:"customrecord_psg_ei_inbound_edoc",TRANSACTION_RESPONSE:"customrecord_psg_ei_trans_res",TRANSACTION_RESPONSE_TYPE:"customrecord_psg_ei_response_status",TRANSACTION_RESPONSE_TEMPLATE:"customrecord_psg_ei_transres_template",EI_SENDING_METHOD:"customrecord_ei_sending_method",SUBSIDIARY_PREF:"customrecord_psg_ei_sub_prefs_data",EDOCUMENT_TEMPLATE:"custbody_psg_ei_template"},CUSTOM_LISTS:{DIRECTION_TYPE:"customlist_psg_ei_direction_type",TRANSACTION_RESPONSE_STATUS:"customlist_psg_ei_sent_status",EDOC_STATUS_LIST:"customlist_psg_ei_status",AUDIT_TRAIL_LIST:"customlist_psg_ei_audit_trail_events"},SCRIPTS:{GENERATE_TRANSACTION_RESPONSE:"customscript_psg_ei_generate_trans_resp",SEND_TRANSACTION_RESPONSE:"customscript_psg_ei_send_trans_res_su",PREVIEW_DOWNLOAD:"customscript_ei_content_service_su"},CUSTPAGE_BUTTONS:{GENERATE_TRANSACTION_RESPONSE:"custpage_generate_ar_ei_button",SEND_TRANSACTION_RESPONSE:"custpage_send_ar_ei_button"},CORE_FIELDS:{INTERNAL_ID:"internalid",SCRIPT_ID:"scriptid",ID:"id",INACTIVE:"isinactive",SUBSIDIARY:"subsidiary",ENTITY:"entity",CUSTOM_STANDARD:"customstandard",TYPE:"type",TRAN_ID:"tranid",RECORD_TYPE:"recordType",APPROVAL_STATUS:"approvalstatus",TRANSACTION_STYLE:"transactionstyle"},SUITEAPPS:{EI:{ID:"436209",NAME:"Electronic Invoicing"}},LICENSES:{EI:"Electronic Invoicing",NSEB:"Netsuite Electronic Business",Avalara:"Avalara Processing For Netsuite Electronic Invoicing"},ROLE_PERMISSIONS:{GEN_AND_SEND_AR:"custrecord_permission_gen_and_send_ar"},TRANSLATE_TYPES:{MESSAGE:"message",TITLE:"title",LABEL:"label"},CUSTOM_TRANSACTION_STYLE:{BASIC:"BASIC",JOURNAL:"JOURNAL",PURCHASE:"PURCHASE",SALES:"SALES"}}}.apply(t,[]))||(e.exports=r)},6478:(e,t,r)=>{var n,a;n=[r(5728),r(9732)],void 0===(a=function(e,t){return{loadEdocFile:function(r){var n={edocFileId:r},a=e.resolveScript({scriptId:"customscript_ei_edoc_loading_service_su",deploymentId:"customdeploy_ei_edoc_loading_service_su"}),i=t.post({url:a,body:n});return JSON.parse(i.body)}}}.apply(t,n))||(e.exports=a)},3623:(e,t)=>{var r;void 0===(r=function(){var e,t=!0;return{consolidateValidationResults:function(r){for(var n=!0,a=[],i=0;i<r.length;i++){var s=r[i];n=n&&s.isValid(),s.getMessage()&&a.push(s.getMessage())}t=n,e=a.join("\n")},isSuccessful:function(){return t},getMessage:function(){return e}}}.apply(t,[]))||(e.exports=r)},3776:(e,t,r)=>{var n,a;n=[r(7903)],void 0===(a=function(e){var t;return{setString:function(r){if(!r)throw e.create({name:"REQUIRED_PARAM_MISSING",message:"Parameter of method setString of String Formatter must not be null or undefined."});t=r},replaceParameters:function(e){for(var r in e){var n=new RegExp("\\{"+r+"\\}","g");t=t.replace(n,e[r])}},toString:function(){return t.toString()}}}.apply(t,n))||(e.exports=a)},9502:(e,t,r)=>{var n,a;n=[r(5389),r(6834)],void 0===(a=function(e,t){var r;function n(n){r||(r=e.getCurrentUser().getPreference("LANGUAGE")),n=(n=n.toLowerCase()).replace(new RegExp(".".replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),"_");var a="";try{a=t.get({collection:"custcollection_ei_translations",key:n,locale:r})()}catch(e){log.error(e.name,e.message+"\n"+e.stack)}return a}return{getString:n,getStringMap:function(e){for(var t={},r=0;r<e.length;r++){var a=e[r];t[a]=n(a)}return t},setLocale:function(e){r=e}}}.apply(t,n))||(e.exports=a)},3899:(e,t)=>{var r;void 0===(r=function(){function e(){var e,t;this.setValidity=function(t){e=t},this.isValid=function(){return e},this.setMessage=function(e){t=e},this.getMessage=function(){return t}}return{create:function(){return new e}}}.apply(t,[]))||(e.exports=r)},7884:(e,t,r)=>{var n,a;n=[r(8337)],void 0===(a=function(e){function t(e){this.id=e.id,this.isDynamic=e.isDynamic,this.type=e.type,this.setValue=function(t){return e.setValue({fieldId:t.fieldId,value:t.value,ignoreFieldChange:!!t.ignoreFieldChange&&t.ignoreFieldChange,fireSlavingSync:!!t.fireSlavingSync&&t.fireSlavingSync}),this}}return{get:function(){return new t(e.get())}}}.apply(t,n))||(e.exports=a)},8337:t=>{"use strict";t.exports=e},7903:e=>{"use strict";e.exports=t},9732:e=>{"use strict";e.exports=r},9063:e=>{"use strict";e.exports=n},6189:e=>{"use strict";e.exports=a},7266:e=>{"use strict";e.exports=i},5389:e=>{"use strict";e.exports=s},1303:e=>{"use strict";e.exports=o},6834:e=>{"use strict";e.exports=u},8445:e=>{"use strict";e.exports=c},5728:e=>{"use strict";e.exports=d},2424:e=>{"use strict";e.exports=p}},T={},function e(t){var r=T[t];if(void 0!==r)return r.exports;var n=T[t]={exports:{}};return l[t](n,n.exports,e),n.exports}(2903);var l,T}));