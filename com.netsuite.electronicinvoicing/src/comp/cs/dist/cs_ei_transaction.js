/**
 * @preserve
 *
 * @NApiVersion 2.1
 * @NScriptName E-Document Sales Transaction CS
 * @NScriptId _edoc_sales_transaction_cs
 * @NScriptType clientscript
 * @NModuleScope TargetAccount
 */

/*! For license information please see cs_ei_transaction.js.LICENSE.txt */
define(["N/https","N/log","N/query","N/record","N/runtime","N/search","N/translation","N/ui/message","N/url"],((e,t,r,n,s,a,o,i,u)=>{return c={723:(e,t)=>{var r;void 0===(r=function(){var e={3:"AF",247:"AX",6:"AL",62:"DZ",12:"AS",1:"AD",9:"AO",5:"AI",10:"AQ",4:"AG",11:"AR",7:"AM",15:"AW",14:"AU",13:"AT",16:"AZ",31:"BS",23:"BH",19:"BD",18:"BB",35:"BY",20:"BE",36:"BZ",25:"BJ",27:"BM",32:"BT",29:"BO",250:"BQ",17:"BA",34:"BW",33:"BV",30:"BR",106:"IO",28:"BN",22:"BG",21:"BF",24:"BI",117:"KH",46:"CM",37:"CA",249:"IC",53:"CV",124:"KY",40:"CF",248:"EA",212:"TD",45:"CL",47:"CN",54:"CX",38:"CC",48:"CO",119:"KM",39:"CD",41:"CG",44:"CK",49:"CR",43:"CI",98:"HR",52:"CU",251:"CW",55:"CY",56:"CZ",59:"DK",58:"DJ",60:"DM",61:"DO",221:"TL",63:"EC",65:"EG",208:"SV",88:"GQ",67:"ER",64:"EE",69:"ET",72:"FK",74:"FO",71:"FJ",70:"FI",75:"FR",80:"GF",175:"PF",213:"TF",76:"GA",85:"GM",79:"GE",57:"DE",82:"GH",83:"GI",89:"GR",84:"GL",78:"GD",87:"GP",92:"GU",91:"GT",81:"GG",86:"GN",93:"GW",94:"GY",99:"HT",96:"HM",233:"VA",97:"HN",95:"HK",100:"HU",109:"IS",105:"IN",101:"ID",108:"IR",107:"IQ",102:"IE",104:"IM",103:"IL",110:"IT",112:"JM",114:"JP",111:"JE",113:"JO",125:"KZ",115:"KE",118:"KI",121:"KP",122:"KR",254:"XK",123:"KW",116:"KG",126:"LA",135:"LV",127:"LB",132:"LS",131:"LR",136:"LY",129:"LI",133:"LT",134:"LU",148:"MO",144:"MK",142:"MG",156:"MW",158:"MY",155:"MV",145:"ML",153:"MT",143:"MH",150:"MQ",151:"MR",154:"MU",243:"YT",157:"MX",73:"FM",139:"MD",138:"MC",147:"MN",140:"ME",152:"MS",137:"MA",159:"MZ",146:"MM",160:"NA",169:"NR",168:"NP",166:"NL",161:"NC",171:"NZ",165:"NI",162:"NE",164:"NG",170:"NU",163:"NF",149:"MP",167:"NO",172:"OM",178:"PK",185:"PW",173:"PA",176:"PG",186:"PY",174:"PE",177:"PH",181:"PN",179:"PL",184:"PT",182:"PR",187:"QA",188:"RE",189:"RO",190:"RU",191:"RW",26:"BL",198:"SH",120:"KN",128:"LC",141:"MF",234:"VC",241:"WS",203:"SM",207:"ST",192:"SA",204:"SN",50:"RS",194:"SC",202:"SL",197:"SG",252:"SX",201:"SK",199:"SI",193:"SB",205:"SO",244:"ZA",90:"GS",253:"SS",68:"ES",130:"LK",183:"PS",180:"PM",195:"SD",206:"SR",200:"SJ",210:"SZ",196:"SE",42:"CH",209:"SY",225:"TW",216:"TJ",226:"TZ",215:"TH",214:"TG",217:"TK",220:"TO",223:"TT",219:"TN",222:"TR",218:"TM",211:"TC",224:"TV",228:"UG",227:"UA",2:"AE",77:"GB",230:"US",231:"UY",229:"UM",232:"UZ",239:"VU",235:"VE",238:"VN",236:"VG",237:"VI",240:"WF",66:"EH",242:"YE",245:"ZM",246:"ZW"};return{getFreeCountryISOCode:function(t){return e[t]},getFreeCountryInternalId:function(t){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t)return r}}}.apply(t,[]))||(e.exports=r)},369:(e,t,r)=>{var n,s;n=[r(1303),r(6189),r(5389),r(7789)],void 0===(s=function(e,t,r,n){function s(e){var r,n,s={success:!1,message:"",cttDetails:{}};if(!e)return s.message="Invalid Transaction Type ID.",s.success=!1,s;if(!a())return s.message="Custom Transactions feature should be enabled.",s.success=!1,s;isNaN(e)?(r="scriptid",n=t.Operator.IS):(r="id",n=t.Operator.EQUAL);try{var o=t.create({type:t.Type.CUSTOM_TRANSACTION_TYPE});o.condition=o.createCondition({fieldId:r,operator:n,values:e}),o.columns=[o.createColumn({fieldId:"name"}),o.createColumn({fieldId:"id"}),o.createColumn({fieldId:"scriptid"})];var i=o.run().results;if(0!==i.length){s.success=!0,s.message="Found CTT Details";for(var u=i.length-1;u>=0;u--)log.debug("EICTTMAN","Result of search on CTT: "+i[u].values),s.cttDetails.name=i[u].values[0],s.cttDetails.internalId=i[u].values[1],s.cttDetails.stringId=i[u].values[2]}else s.success=!1,s.message="The Transaction Type does not exist in the account."}catch(e){log.error(e.name,e.message+e.stack),s.success=!1,s.message="An error occurred during search on CTT. Details: "+e.name+". "+e.message}return s}function a(){return r.isFeatureInEffect("CUSTOMTRANSACTIONS")}return{getRegisteredCTTIntIdArray:function(){for(var t="custrecord_ei_registered_ctt",r=e.lookupFields({type:"customrecord_ei_ctt_map",id:1,columns:t})[t],n=[],s=0;s<r.length;s++)n.push(r[s].value);return log.debug("EICTTMAN","IDs in EICTTMAP: "+JSON.stringify(n)),n},getCTTDetails:s,getStringIdOfCTTFromInternalId:function(e){if(e)return s(e).cttDetails.stringId},getInternalIdOfCTTFromStringId:function(e){if(e)return s(e).cttDetails.internalId},isCustomTransactionFeatureEnabled:a,getCTTTransStyle:function(e){var r=null;if(!a())return r;var s=t.create({type:t.Type.CUSTOM_TRANSACTION_TYPE}),o=s.createCondition({fieldId:n.CORE_FIELDS.SCRIPT_ID,operator:t.Operator.IS,values:e});s.condition=s.and(o),s.columns=[s.createColumn({fieldId:n.CORE_FIELDS.TRANSACTION_STYLE,context:t.FieldContext.RAW})];var i=s.run().asMappedResults();return 1==i.length&&(r=i[0].transactionstyle),r}}}.apply(t,n))||(e.exports=s)},3367:(e,t,r)=>{var n,s;n=[r(9732),r(5728),r(9502),r(8445),r(1303),r(5389),r(4148),r(9063)],void 0===(s=function(e,t,r,n,s,a,o,i){var u="custbody_psg_ei_status",c="custbody_psg_ei_template",d="custbody_edoc_gen_trans_pdf",p="custentity_psg_ei_auto_select_temp_sm",l="entity",T="customer",f="custbody_psg_ei_sending_method",_="TrnfrOrd",g="transferorder",y="isinactive",v="transaction.msg.alreadysentgenerationconfirm",I="transaction.msg.removetemplatealreadysent",S="ei.eip.msg.processing",m="transaction.msg.generate.information",C="transaction.msg.send.information",E="transaction.msg.send.certify.information",h="ei.eip.msg.processing.alreadyinprogress",O="transaction.msg.generate.alreadyinprogress.information",A="transaction.msg.send.alreadyinprogress.information",N="transaction.msg.send.alreadyinprogress.certify.information",R="transaction.msg.network.status.in.progress",D="transaction.msg.uncheckpdf",F="transaction.maxrecipientexceeded",M="An e-document has already been sent for this transaction. Generating a new e-document will overwrite the previous e-document. Are you sure you want to generate a new e-document?",L="Removing the e-document template for sent e-documents is not allowed.",P="The E-Document is being processed.",b="Generation of this E-Document is in progress.",V="Sending of this E-Document is in progress.",G="Certification of this E-Document is in progress.",U="Getting the e-document network status.",x="The E-Document is already being processed.",B="Generation of this E-Document is already in progress.",Y="Sending of this E-Document is already in progress.",w="Certification of this E-Document is already in progress.",k="A PDF file of this transaction was created during the last e-document generation. Clearing this box will delete that PDF file in the next e-document generation.",H="You have exceeded the maximum number of email recipients. Select a maximum of 10 email recipients only.",K="custentity_psg_ei_entity_edoc_standard",J="custbody_psg_ei_trans_edoc_standard",W="subsidiary",Z=[],Q=!1,X=!1,z=!1,j=!1,$=!1,q="copy",ee="createdfrom",te=!1,re="ordertype";function ne(){0===Z.length&&(Z=r.getStringMap([v,I,S,m,C,E,h,O,A,N,D,F,R]),M=Z[v]||M,L=Z[I]||L,P=Z[S]||P,b=Z[m]||b,V=Z[C]||V,G=Z[E]||G,x=Z[h]||x,B=Z[O]||B,Y=Z[A]||Y,w=Z[N]||w,k=Z[D]||k,H=Z[F]||H,U=Z[R]||U)}function se(){return Q||X||z||j||$}function ae(e){n.create({type:n.Type.INFORMATION,message:e}).show()}function oe(){return Q?B:z?Y:X?w:j?x:$?U:void 0}function ie(e,r,n,s){var a={ei_process:s,ei_bid:e.data.bundleId,ei_mc:e.data.messageCode,ei_t:e.data.messageType},o=t.resolveRecord({recordType:n,recordId:r,isEditMode:!1,params:a});window.location=o}function ue(e){var t=o.getEntityFieldIDFromTransactionRecord(e),r=e.getValue(t);try{if(null!==r&&""!==r&&void 0!==r){var n={type:t,id:r,columns:[p,K]};s.lookupFields.promise(n).then((function(t){if(null!==t&&""!==t&&void 0!==t){var r=t[K];if(void 0!==t[p]&&(te=t[p]),void 0!==r){var n=r.length>0?r[0].value:"";e.setValue(J,n)}}})).catch((function(e){return e}))}}catch(e){i.error(e.name,e.message+"\n"+e.stack)}}function ce(e){var t=e.getValue(J),r=e.getValue(re);if((e.type===g||r===_||o.isBasicStyleCTT(e.type)||o.isJournalStyleCTT(e.type)||te)&&""!==t)try{!function(e,t){var r=function(e,t){var r=[],n=e.getValue("ntype"),o=e.getValue("subsidiary");r.push([y,s.Operator.IS,"F"]),r.push("AND"),r.push(["custrecord_psg_ei_template_edoc_standard",s.Operator.IS,t]);var i=[],u=["custrecord_psg_ei_template_trans_type",s.Operator.ANYOF,n];return r.push("AND"),a.isFeatureInEffect("SUBSIDIARIES")&&o.length>0?(i.push(["custrecord_psg_ei_template_subsidiary",s.Operator.ANYOF,o]),r.push([i,"AND",u])):r.push(u),r}(e,t),n=function(e,t){var r=[],n=e.getValue("ntype"),o=e.getValue("subsidiary");r.push([y,s.Operator.IS,"F"]),r.push("AND"),r.push(["custrecord_psg_ei_edoc_standard",s.Operator.IS,t]);var i=[],u=["custrecord_psg_ei_trans_type",s.Operator.ANYOF,n];return r.push("AND"),a.isFeatureInEffect("SUBSIDIARIES")&&o.length>0?(i.push(["custrecord_psg_ei_sm_subsidiary",s.Operator.ANYOF,o]),r.push([i,"AND",u])):r.push(u),r}(e,t),o=[],u=[],d={type:"customrecord_psg_ei_template",columns:[s.createColumn({name:"internalid"})],filters:r},p={type:"customrecord_ei_sending_method",columns:[s.createColumn({name:"internalid"})],filters:n};try{s.create.promise(d).then((function(e){return e.run().each.promise((function(e){return o.push(e.id),!0}))})).then((function(t){return 1===o.length&&e.setValue(c,o[0]),t})).catch((function(e){return e})),s.create.promise(p).then((function(e){return e.run().each.promise((function(e){return u.push(e.id),!0}))})).then((function(t){return 1===u.length&&e.setValue(f,u[0]),t})).catch((function(e){return e}))}catch(e){i.error("Error during searching of E-Document Template/Sending Method on Entity load"),i.error(e.name,e.message+"\n"+e.stack)}}(e,t)}catch(e){i.error(e.name,e.message+"\n"+e.stack)}}return{saveRecord:function(e){var t=!0,r=e.currentRecord,n=r.getValue({fieldId:c});"7"!==r.getValue({fieldId:u})||n||(alert(L),t=!1);var s=r.getValue({fieldId:"custbody_psg_ei_edoc_recipient"});return null!=s&&""!==s&&s.length>10&&(alert(H),t=!1),t},processEdoc:function(r,n,s,o){if(ne(),"undefined"!==o&&""!==o||(o=void 0),se())alert(oe());else if(function(e){return"7"!==e||confirm(M)}(n)){j=!0,ae(P);var i=t.resolveScript({scriptId:"customscript_ei_processing_service_su",deploymentId:"customdeploy_ei_processing_service_su"}),u=a.getCurrentUser().getPreference("LANGUAGE"),c=a.getCurrentUser().id;console.log("Runtime current user id: "+c),console.log("certSendingMethodId: "+o),e.post.promise({url:i,body:{transId:r,transType:s,certSendingMethodId:o,userId:c,locale:u}}).then((function(e){var t=JSON.parse(e.body);console.log(t),ie(t,r,s,"eip")}))}},generate:function(r,n,s,a){if(ne(),se())alert(oe());else{var o=!0;if("7"===n&&(o=confirm(M)),o){Q=!0,ae(b);var i=t.resolveScript({scriptId:"customscript_ei_generation_service_su",deploymentId:"customdeploy_ei_generation_service_su"});e.post.promise({url:i,body:{transId:r,transType:s,certSendingMethodId:a}}).then((function(e){ie(JSON.parse(e.body),r,s,"generation")}))}}},send:function(r,n,s,a){if(ne(),se())alert(oe());else{""!==s&&void 0!==s||a?(X=!0,ae(G)):(z=!0,ae(V));var o=t.resolveScript({scriptId:"customscript_su_send_e_invoice",deploymentId:"customdeploy_su_send_e_invoice"});e.post.promise({url:o,body:{transId:r,transType:n,certSendingMethodId:s,isAvalara:!!a}}).then((function(e){ie(JSON.parse(e.body),r,n,"sending")}))}},getNetworkStatus:function(r,n,s){if(ne(),se())alert(oe());else{$=!0,ae(U);var a=t.resolveScript({scriptId:"customscript_get_network_status_su",deploymentId:"customdeploy_get_network_status_su"});e.post.promise({url:a,body:{transId:r,transType:n,certSendingMethodId:s}}).then((function(e){ie(JSON.parse(e.body),r,n,"networkStatus")}))}},pageInit:function(e){var t="edit",r=e.currentRecord,n=r.getValue(l),a=r.getValue(T),o=e.mode;ne(),""===n&&void 0===a||""===a&&void 0===n||"create"!==o||ue(r);var y=r.getText(J),v=r.getValue(re);if(o!==t&&o!==q||"itemfulfillment"!==r.type||v!==_){if(!(o!==t&&o!==q||""!==y&&void 0!==y)){var I=r.getValue(c),S=r.getValue(f);!function(e,t){try{if(""!==e&&void 0!==e){var r,n=t.getValue(ee);if("salesord"===e.toLowerCase())r="salesorder";else{if("vendauth"!==e.toLowerCase())return i.debug("loadEntityFrmParentTxn","sourceOrderType::"+e+" && currentRecord.type::"+t.type),null;r="vendorreturnauthorization"}var a={type:r,id:n,columns:[l]};s.lookupFields.promise(a).then((function(e){if(null!==e&&""!==e&&void 0!==e){var r=e[l];if(void 0!==r&&""!==(r=r.length>0?r[0].value:"")){var n=function(e,t){try{if(null!==e&&""!==e&&void 0!==e){var r={type:t,id:e,columns:[p,K]};return s.lookupFields(r)}}catch(e){i.error("Error during search on entity"),i.error(e.name,e.message+"\n"+e.stack)}return null}(r,l),a=n[K];if(void 0!==n[p]&&(te=n[p]),void 0!==a){var o=a.length>0?a[0].value:"";t.setValue(J,o)}}}})).catch((function(e){return e}))}else ue(t)}catch(e){i.error(e.name,e.message+"\n"+e.stack)}}(v,r),o===t&&(r.setValue(c,I),r.setValue(f,S))}}else!function(e,t){var r=t.getValue(ee),n={type:g,id:r,columns:[J,d]};try{s.lookupFields.promise(n).then((function(r){if(null!==r&&""!==r&&void 0!==r){var n=r[J];e===q?(t.setValue(d,void 0!==r[d]&&r[d]),ce(t)):""!==n&&void 0!==n&&n.length>0?n[0].value!==t.getValue(J)&&t.setValue(J,n[0].value):t.setValue(J,"")}})).catch((function(e){return e}))}catch(e){i.error(e.name,e.message)}}(o,r);e.mode===q&&(r.setValue("custbody_psg_ei_content",""),r.setValue(u,""),r.setValue("custbody_psg_ei_generated_edoc",""),r.setValue("custbody_psg_ei_certified_edoc",""),r.getValue(ee)&&v!==_&&(r.setValue(c,""),r.setValue(f,""),function(e){var t="custentity_edoc_gen_trans_pdf";try{var r={type:"entity",id:e.getValue("entity"),columns:[t]};s.lookupFields.promise(r).then((function(r){e.setValue(d,void 0!==r[t]&&r[t])})).catch((function(e){return e}))}catch(e){return i.error(e.name,e.message+"\n"+e.stack),!1}}(r)))},fieldChanged:function(e){var t=e.currentRecord,r=t.getValue(J);if(e.fieldId===d)""===t.getValue("custbody_edoc_generated_pdf")||t.getValue(d)||alert(k);else if(e.fieldId===J)ce(t);else if(e.fieldId===W&&(t.type===g||o.isBasicStyleCTT(t.type)||o.isJournalStyleCTT(t.type)))t.setValue(J,"");else if(e.fieldId===W&&r){var n=o.getEntityFieldIDFromTransactionRecord(t),a=t.getValue(n);try{if(null!==a&&""!==a&&void 0!==a){var u={type:n,id:a,columns:[p]};s.lookupFields.promise(u).then((function(e){null!==e&&""!==e&&void 0!==e&&void 0!==e[p]&&(te=e[p])})).catch((function(e){return e}))}}catch(e){i.error(e.name,e.message+"\n"+e.stack)}ce(t)}},postSourcing:function(e){var t=e.currentRecord;e.fieldId!==l&&e.fieldId!==T||ue(t)}}}.apply(t,n))||(e.exports=s)},4148:(e,t,r)=>{var n,s;n=[r(7266),r(1303),r(6189),r(369),r(723),r(5389),r(9063)],void 0===(s=function(e,t,r,n,s,a,o){var i,u="outbound",c="inbound",d="purchase",p="sales",l="restemp",T="SUBSIDIARIES",f={};function _(){Object.keys(f).length||(f[17]={transCode:"VendBill",edocType:[c,u],type:e.Type.VENDOR_BILL,transGroupType:d,inactive:!1},f[29]={transCode:"CashRfnd",edocType:[u],type:e.Type.CASH_REFUND,transGroupType:p,inactive:!1},f[5]={transCode:"CashSale",edocType:[u],type:e.Type.CASH_SALE,transGroupType:p,inactive:!1},f[10]={transCode:"CustCred",edocType:[u,l],type:e.Type.CREDIT_MEMO,transGroupType:p,inactive:!1},f[6]={transCode:"Estimate",edocType:[u],type:e.Type.ESTIMATE,transGroupType:p,inactive:!1},f[7]={transCode:"CustInvc",edocType:[u,l],type:e.Type.INVOICE,transGroupType:p,inactive:!1},f[15]={transCode:"PurchOrd",edocType:[u,l],type:e.Type.PURCHASE_ORDER,transGroupType:d,inactive:!1},f[33]={transCode:"RtnAuth",edocType:[u],type:e.Type.RETURN_AUTHORIZATION,transGroupType:p,inactive:!1},f[9]={transCode:"CustPymt",edocType:[u],type:e.Type.CUSTOMER_PAYMENT,transGroupType:p,inactive:!1},f[32]={transCode:"ItemShip",edocType:[u],type:e.Type.ITEM_FULFILLMENT,transGroupType:p,inactive:!1},f[20]={transCode:"VendCred",edocType:[c,u],type:e.Type.VENDOR_CREDIT,transGroupType:d,inactive:!1},f[48]={transCode:"TrnfrOrd",edocType:[u],type:e.Type.TRANSFER_ORDER,transGroupType:p,inactive:!1},f[31]={transCode:"SalesOrd",edocType:[c],type:e.Type.SALES_ORDER,transGroupType:p,inactive:!1},f[40]={transCode:"CustDep",edocType:[u],type:e.Type.CUSTOMER_DEPOSIT,transGroupType:p,inactive:!1})}function g(e){_();var t,r,n=[];I();for(var s=0;s<e.length;s++)t=e[s],(r=f[t])&&r.edocType.indexOf(u)>=0&&n.push(r.transCode);return n}function y(){_();var e=[];for(var t in I(),f){var r=f[t];r.edocType.indexOf(u)>=0&&e.push(r.transCode)}return e}function v(){_();var e=[];for(var t in I(),f){var r=f[t];r.transGroupType===p&&e.push(r.transCode)}return e}function I(){_();var e=O();for(var t in e){var r=e[t];f[t]=r}}function S(e){return-1!==e.indexOf("custom")||-1!==e.indexOf("cutr")}function m(e){var t=!1;return!!e&&(e&&!F(e)&&(t=0===e.toLowerCase().indexOf("customtransaction")),t)}function C(e){var t=!1;return!!e&&(e&&!F(e)&&(t=0===e.toLowerCase().indexOf("customtransaction")),t)}function E(e){var t=!1;return!!e&&(e&&!F(e)&&(t=0===e.toLowerCase().indexOf("customsale")),t)}function h(e){var t=!1;return!!e&&(e&&!F(e)&&(t=0===e.toLowerCase().indexOf("custompurchase")),t)}function O(){if(!i||0===Object.keys(i).length){i={};var e=[];try{e=n.getRegisteredCTTIntIdArray();for(var t=0;t<e.length;t++){var r=n.getStringIdOfCTTFromInternalId(e[t]),s=void 0,a=void 0;m(r)||C(r)?(s="custom"+e[t],a=p):E(r)?(s="cutrsale"+e[t],a=p):h(r)&&(s="cutrprch"+e[t],a=d),s&&(i[e[t]]={edocType:[u],type:r,inactive:!1,transCode:s,transGroupType:a})}}catch(e){o.error(e.name,e.message+" "+e.stack)}}return i}function A(e){var t=[];for(var r in e)S(e[r])&&t.push(e[r]);for(var n=e.length-1;n>=0;n--)for(var s=0;s<t.length;s++)e[n]===t[s]&&e.splice(n,1);return e}function N(e){var t,r;_();var n=[];I();for(var s=0;s<e.length;s++)t=e[s],(r=f[t])&&r.edocType.indexOf(u)>=0&&S(r.transCode)&&n.push(r.transCode);return n}function R(){_();var e=[];for(var t in I(),f){var r=f[t];r.transGroupType===p&&S(r.transCode)&&e.push(r.transCode)}return e}function D(){_();var e=[],t=O();for(var r in t)e.push(t[r].transCode);return e}function F(e){return!isNaN(e)}return{getSupportedTransTypeLabels:function(e,t,r){_();var s=[];if(t){if(t.indexOf(c)>=0)for(var a in f)f[a].edocType.indexOf(c)>=0&&s.push(a);else if(t.indexOf(u)>=0)for(var i in f)f[i].edocType.indexOf(u)>=0&&s.push(i);else if(t.indexOf(l)>=0)for(var d in f)f[d].edocType.indexOf(l)>=0&&s.push(d)}else for(var p in f)s.push(p);if(!r)try{s=function(e){for(var t=n.getRegisteredCTTIntIdArray(),r=0;r<t.length;r++)-1===e.indexOf(t[r])&&e.push(t[r]);return e}(s)}catch(e){o.error(e.name,e.message+" "+e.stack)}if(s.length>0)for(var T=0;T<e.length;)-1!==s.indexOf(e[T].value)?T++:e.splice(T,1);else e=[];return e},getTransactionTypeFromCode:function(e){for(var t in _(),f)if(f[t].transCode===e)return f[t].type},getTransactionTypeFromId:function(e){return _(),f[e].type},getOutboundTransactionCodes:g,getInboundTransactionCodes:function(e){_();for(var t,r,n=[],s=0;s<e.length;s++)t=e[s],(r=f[t]).edocType.indexOf(c)>=0&&n.push(r.transCode);return n},getResponseTemplateTransactionCodes:function(e){_();for(var t,r,n=[],s=0;s<e.length;s++)t=e[s],(r=f[t]).edocType.indexOf(l)>=0&&n.push(r.transCode);return n},getInboundTransactionRecordTypes:function(e){_();for(var t,r,n=[],s=0;s<e.length;s++)t=e[s],(r=f[t]).edocType.indexOf(c)>=0&&n.push(r.type);return n},isValidOutboundTransactionType:function(e){_();var t=f[e];if(t&&t.edocType.indexOf(u)>=0)return!0;var r=O()[e];return!!(r&&r.edocType.indexOf(u)>=0)},isValidInboundTransactionType:function(e){_();var t=!1,r=f[e];return r&&r.edocType.indexOf(c)>=0&&(t=!0),t},isSalesTransaction:function(e,t){_();var r,n,s=!1;if(!1!==t&&I(),parseInt(e))r=f[parseInt(e)];else for(var a in f)(n=f[a]).transCode.toLowerCase()===e.toLowerCase()&&(r=n);return r&&r.transGroupType===p&&(s=!0),s},isPurchaseTransaction:function(e,t){_();var r,n,s=!1;if(!1!==t&&I(),parseInt(e))r=f[parseInt(e)];else for(var a in f)(n=f[a]).transCode.toLowerCase()===e.toLowerCase()&&(r=n);return r&&r.transGroupType===d&&(s=!0),s},getAllSalesTransactionCodes:v,getAllPurchaseTransactionIds:function(){_();var e=[];for(var t in I(),f)f[t].transGroupType===d&&e.push(t);return e},getAllOutboundTransactionCodes:y,getValidPayloadTransactionIDs:function(){_();var e=[],t=0;for(var r in f)f[r].inactive||(e[t++]=r);var n=O();for(var s in n)e[t++]=n[s].type;return e},getValidPayloadTransactionTypes:function(){_();var e=[];for(var t in f){var r=f[t];!1===r.inactive&&e.push(r.type)}var n=O();for(var s in n)e.push(n[s].type);return e},getTransactionFilters:function(e,r,n){_();var s=[];n?n.length>0?s=g(n):0===n.length&&(s=v()):s=y(),s=A(s);var o=[["type",t.Operator.ANYOF,s]];a.isFeatureInEffect(T)&&e&&o.push("AND",["formulatext: {subsidiary.country}",t.Operator.IS,e]);var i=[];s.length>0&&i.push(o);var u=[];return u.push(["custbody_psg_ei_status",t.Operator.ANYOF,r]),u.push("AND"),u.push(["mainline",t.Operator.IS,"T"]),u.push("AND"),u.push(i),u.push("AND"),u.push(["memorized",t.Operator.IS,"F"]),u},getTransactionFiltersQuery:function(e,t,n,i,u){_();var c=[],d=[];u?u.length>0?c=g(u):0===u.length&&(c=v()):c=y(),c=A(c);var p=a.isFeatureInEffect(T);return o.debug("getTransactionFiltersQuery():allowedCountry",n),o.debug("getTransactionFiltersQuery():subsidiaryId",t),p&&(n||t)&&(t&&d.push(e.createCondition({fieldId:"transactionlines.subsidiary",operator:r.Operator.EQUAL,values:t})),n&&d.push(e.createCondition({fieldId:"transactionlines.subsidiary.country",operator:r.Operator.IS,values:s.getFreeCountryISOCode(n)})),d.push(e.createCondition({fieldId:"transactionlines.mainline",operator:r.Operator.IS,values:!0}))),c.length>0&&d.push(e.createCondition({fieldId:"type",operator:r.Operator.ANY_OF,values:c})),d.push(e.createCondition({fieldId:"custbody_psg_ei_status",operator:r.Operator.ANY_OF,values:i})),d},getCustomTransactionFilters:function(e,r){_();var n=[];r?r.length>0?n=N(r):0===r.length&&(n=R()):n=D();var s=[["type",t.Operator.ANYOF,n]],a=[];n.length>0&&a.push(s);var o=[];return o.push(["custbody_psg_ei_status",t.Operator.ANYOF,e]),o.push("AND"),o.push(["mainline",t.Operator.IS,"T"]),o.push("AND"),o.push(a),o.push("AND"),o.push(["memorized",t.Operator.IS,"F"]),o},getCustomTransactionFiltersQuery:function(e,t,n){_();var s=[];n?n.length>0?s=N(n):0===n.length&&(s=R()):s=D();var a=[];return s.length>0&&a.push(e.createCondition({fieldId:"type",operator:r.Operator.ANY_OF,values:s})),a.push(e.createCondition({fieldId:"custbody_psg_ei_status",operator:r.Operator.ANY_OF,values:t})),a},isCustomTransactionType:function(e){return _(),F(e)&&(e=n.getStringIdOfCTTFromInternalId(e)),!!e&&(m(e=e.toLowerCase())||C(e)||E(e)||h(e))},isSalesStyleCTT:E,isPurchaseStyleCTT:h,isBasicStyleCTT:m,isJournalStyleCTT:C,getAllOutboundCttCodes:D,getOutboundCttCodes:N,getAllCttSalesTransactionCodes:R,removeCttTransCodes:A,getCTTMap:O,getAllInboundSalesTransactionIds:function(){_();var e=[];for(var t in I(),f){var r=f[t];r.transGroupType===p&&r.edocType.indexOf(c)>=0&&e.push(t)}return e},getAllPurchaseInboundTransactionIds:function(){_();var e=[];for(var t in I(),f){var r=f[t];r.transGroupType===d&&r.edocType.indexOf(c)>=0&&e.push(t)}return e},getEntityFieldIDFromTransactionRecord:function(t){var r="";switch(t.type){case e.Type.CUSTOMER_DEPOSIT:case e.Type.CUSTOMER_PAYMENT:r="customer";break;case e.Type.CASH_REFUND:case e.Type.CASH_SALE:case e.Type.CREDIT_MEMO:case e.Type.ESTIMATE:case e.Type.INVOICE:case e.Type.RETURN_AUTHORIZATION:case e.Type.VENDOR_BILL:case e.Type.PURCHASE_ORDER:case e.Type.ITEM_FULFILLMENT:case e.Type.VENDOR_CREDIT:case e.Type.SALES_ORDER:case e.Type.TRANSFER_ORDER:default:r="entity"}return r},getRecordType:function(e){_();var t=null;if(e)for(var r in f){var n=f[r];n.transCode===e&&(t=n.type)}return t}}}.apply(t,n))||(e.exports=s)},7789:(e,t)=>{var r;void 0===(r=function(){return{FEATURES:{SUBSIDIARIES:"subsidiaries"},RECORD_TYPES:{INBOUND_EDOCUMENT:"customrecord_psg_ei_inbound_edoc",TRANSACTION_RESPONSE:"customrecord_psg_ei_trans_res",TRANSACTION_RESPONSE_TYPE:"customrecord_psg_ei_response_status",TRANSACTION_RESPONSE_TEMPLATE:"customrecord_psg_ei_transres_template",EI_SENDING_METHOD:"customrecord_ei_sending_method",SUBSIDIARY_PREF:"customrecord_psg_ei_sub_prefs_data",EDOCUMENT_TEMPLATE:"custbody_psg_ei_template"},CUSTOM_LISTS:{DIRECTION_TYPE:"customlist_psg_ei_direction_type",TRANSACTION_RESPONSE_STATUS:"customlist_psg_ei_sent_status",EDOC_STATUS_LIST:"customlist_psg_ei_status",AUDIT_TRAIL_LIST:"customlist_psg_ei_audit_trail_events"},SCRIPTS:{GENERATE_TRANSACTION_RESPONSE:"customscript_psg_ei_generate_trans_resp",SEND_TRANSACTION_RESPONSE:"customscript_psg_ei_send_trans_res_su",PREVIEW_DOWNLOAD:"customscript_ei_content_service_su"},CUSTPAGE_BUTTONS:{GENERATE_TRANSACTION_RESPONSE:"custpage_generate_ar_ei_button",SEND_TRANSACTION_RESPONSE:"custpage_send_ar_ei_button"},CORE_FIELDS:{INTERNAL_ID:"internalid",SCRIPT_ID:"scriptid",ID:"id",INACTIVE:"isinactive",SUBSIDIARY:"subsidiary",ENTITY:"entity",CUSTOM_STANDARD:"customstandard",TYPE:"type",TRAN_ID:"tranid",RECORD_TYPE:"recordType",APPROVAL_STATUS:"approvalstatus",TRANSACTION_STYLE:"transactionstyle"},SUITEAPPS:{EI:{ID:"436209",NAME:"Electronic Invoicing"}},LICENSES:{EI:"Electronic Invoicing",NSEB:"Netsuite Electronic Business",Avalara:"Avalara Processing For Netsuite Electronic Invoicing"},ROLE_PERMISSIONS:{GEN_AND_SEND_AR:"custrecord_permission_gen_and_send_ar"},TRANSLATE_TYPES:{MESSAGE:"message",TITLE:"title",LABEL:"label"},CUSTOM_TRANSACTION_STYLE:{BASIC:"BASIC",JOURNAL:"JOURNAL",PURCHASE:"PURCHASE",SALES:"SALES"}}}.apply(t,[]))||(e.exports=r)},9502:(e,t,r)=>{var n,s;n=[r(5389),r(6834)],void 0===(s=function(e,t){var r;function n(n){r||(r=e.getCurrentUser().getPreference("LANGUAGE")),n=(n=n.toLowerCase()).replace(new RegExp(".".replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),"_");var s="";try{s=t.get({collection:"custcollection_ei_translations",key:n,locale:r})()}catch(e){log.error(e.name,e.message+"\n"+e.stack)}return s}return{getString:n,getStringMap:function(e){for(var t={},r=0;r<e.length;r++){var s=e[r];t[s]=n(s)}return t},setLocale:function(e){r=e}}}.apply(t,n))||(e.exports=s)},9732:t=>{"use strict";t.exports=e},9063:e=>{"use strict";e.exports=t},6189:e=>{"use strict";e.exports=r},7266:e=>{"use strict";e.exports=n},5389:e=>{"use strict";e.exports=s},1303:e=>{"use strict";e.exports=a},6834:e=>{"use strict";e.exports=o},8445:e=>{"use strict";e.exports=i},5728:e=>{"use strict";e.exports=u}},d={},function e(t){var r=d[t];if(void 0!==r)return r.exports;var n=d[t]={exports:{}};return c[t](n,n.exports,e),n.exports}(3367);var c,d}));